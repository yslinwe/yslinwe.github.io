<!doctype html><html lang=zh dir=ltr><head prefix="og: http://ogp.me/ns#"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Supervisor使用 – 我的学习博客</title>
<script defer src=/js/fuse.min.32195737929df2c8096e855a5789cbb3f1331224d9169e8705493e7008f47df8.js></script><script src=/js/enquire.min.dfb99dee1e029d51d6cfb672d847929890b1585402de17f5ed092edd72a688b4.js></script><script defer src=/js/lazysizes.min.fb649fcae62177dfe63e67081ddceb830b5ce1f05a4184e9bbb7d87ac4b8f4e5.js></script><script defer src=/js/helper/getParents.min.086022fb02d7a1517e33c2670bffb976b3e80bcacd9caeee0c6a586064f20e42.js></script><script defer src=/js/helper/fadeinout.min.3ce954c8aea3b69cc5e6f734d8273ba4cd48d3a7987dbdca145849bc4b8fc296.js></script><script defer src=/js/helper/closest.min.js></script><script>"use strict";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return t===void 0&&(t=0),this.indexOf(e,t)!==-1}),Document.prototype.append=Element.prototype.append=function(){this.appendChild(_mutation(arguments))};function _mutation(e){if(!e.length)throw new Error("DOM Exception 8");if(e.length===1)return typeof e[0]=="string"?document.createTextNode(e[0]):e[0];for(var t,n=document.createDocumentFragment(),o=e.length,s=-1;++s<o;)t=e[s],n.appendChild(typeof t=="string"?document.createTextNode(t):t);return n}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),document.addEventListener("DOMContentLoaded",function(){var e,t,n,s,o,i,a,r,c,l,d,u,h,f,p,g,v,b,j,y,_,w,O,x,C,E,k,A,M,F,T,z,D,N,L,R,P,H,I,B,V,$,W,U,K,q,Y,G,X,Q,S=document.querySelector(".navbar__burger"),le,ue,me,he,de,ae,ie,oe,re,ge,pe,fe;S?S.addEventListener("click",function(){var n,t=document.querySelector(".navbarm__collapse");t&&(n=t.getAttribute("data-open"),n==="true"?(t.setAttribute("data-open","false"),t.style.maxHeight=0,S.classList.remove("is-active")):(t.setAttribute("data-open","true"),t.style.maxHeight=t.scrollHeight+"px",S.classList.add("is-active")))}):null;for(let se=document.querySelectorAll(".single__contents > table"),e=0;e<se.length;e++)T=se[e],F=document.createElement("div"),F.className="table-wrapper",T.parentElement.replaceChild(F,T),F.appendChild(T);q=document.querySelectorAll(".footnote-ref"),$=document.querySelectorAll(".footnote-backref"),q?q.forEach(function(e){e.onmouseenter=function(){t.classList.contains("scrolling")&&t.classList.remove("scrolling")},e.onmouseleave=function(){t.classList.contains("scrolling")||setTimeout(function(){t.classList.add("scrolling")},100)},e.onclick=function(){t.classList.contains("scrolling")||(t.classList.remove("navbar--show"),t.classList.remove("navbar--hide"),t.classList.add("navbar--hide"))}}):null,$?$.forEach(function(e){e.onmouseenter=function(){t.classList.contains("scrolling")&&t.classList.remove("scrolling")},e.onmouseleave=function(){t.classList.contains("scrolling")||setTimeout(function(){t.classList.add("scrolling")},100)},e.onclick=function(){t.classList.contains("scrolling")||(t.classList.remove("navbar--show"),t.classList.remove("navbar--hide"),t.classList.add("navbar--hide"))}}):null,s=document.querySelector(".summary__container"),i=document.querySelector(".search-result"),V=document.querySelector(".search-result__close"),V?V.addEventListener("click",function(){i.setAttribute("data-display","none"),s.setAttribute("data-display","block")}):null,document.querySelectorAll(".tab")?document.querySelectorAll(".tab").forEach(function(e){var o=e.getAttribute("id"),i=e,n=e.querySelectorAll(".tab__link"),s=e.querySelectorAll(".tab__content"),a=[];n&&n.length>0?n.forEach(function(e,t,n){e.onclick=function(){for(var o=0;o<n.length;o++)t===parseInt(o,10)?n[o].classList.contains("active")||(n[o].classList.add("active"),s[o].style.display="block"):(n[o].classList.remove("active"),s[o].style.display="none")}}):null}):null,document.querySelectorAll(".codetab")?document.querySelectorAll(".codetab").forEach(function(e){var o=e.getAttribute("id"),i=e,n=e.querySelectorAll(".codetab__link"),s=e.querySelectorAll(".codetab__content"),a=[];n&&n.length>0?n.forEach(function(e,t,n){e.onclick=function(){for(var o=0;o<n.length;o++)t===parseInt(o,10)?n[o].classList.contains("active")||(n[o].classList.add("active"),s[o].style.display="block"):(n[o].classList.remove("active"),s[o].style.display="none")}}):null}):null,v=document.getElementById("gtt"),v.style.display="none",v.addEventListener("click",function(){window.document.documentMode?document.documentElement.scrollTop=0:be(250)});function be(e){var t=-window.scrollY/(e/15),n=setInterval(function(){window.scrollY!=0?window.scrollBy(0,t):clearInterval(n)},15)}for(let ve=function(){document.body.scrollTop>250||document.documentElement.scrollTop>250?v.style.display="block":v.style.display="none"},ce=document.querySelectorAll(".expand__button"),e=0;e<ce.length;e++)ce[e].addEventListener("click",function(){var e=this.nextElementSibling;e.style.maxHeight?(e.style.maxHeight=null,this.querySelector("svg").classList.add("expand-icon__right"),this.querySelector("svg").classList.remove("expand-icon__down")):(e.style.maxHeight=e.scrollHeight+"px",this.querySelector("svg").classList.remove("expand-icon__right"),this.querySelector("svg").classList.add("expand-icon__down"))});I=window.pageYOffset||document.documentElement.scrollTop,f=document.querySelector(".toc"),a=f?f.querySelector("#TableOfContents"):null,x=document.getElementById("toggle-toc"),d=document.querySelector(".single__contents"),t=document.querySelector(".navbar"),b=document.querySelector(".toc__flexbox"),j=document.querySelector(".toc__flexbox--outer"),H=document.querySelectorAll(".expand__content"),P=document.querySelectorAll(".box"),o=null,E=JSON.parse("true"),r=JSON.parse('["h2","h3","h4"]'),r?r=r.toString():r="h1, h2, h3, h4, h5, h6",d&&d.querySelectorAll(".tab")?d.querySelectorAll(".tab").forEach(function(e){e.querySelectorAll(r).forEach(function(e){o=Array.isArray(o)?o.concat(e.getAttribute("id")):[e.getAttribute("id")]})}):null,H?H.forEach(function(e){e.querySelectorAll(r).forEach(function(e){o=Array.isArray(o)?o.concat(e.getAttribute("id")):[e.getAttribute("id")]})}):null,P?P.forEach(function(e){e.querySelectorAll(r).forEach(function(e){o=Array.isArray(o)?o.concat(e.getAttribute("id")):[e.getAttribute("id")]})}):null,window.onscroll=function(){ve();var e=window.pageYOffset||document.documentElement.scrollTop;if(e>I){if(e<250?v.style.display="none":v.style.display="block",e<45)return null;t.classList.contains("scrolling")&&(t.classList.contains("navbar--hide")?t.classList.contains("navbar--show")&&t.classList.remove("navbar--show"):t.classList.add("navbar--hide")),d&&(d.querySelectorAll(r).length>0?d.querySelectorAll(r).forEach(function(e){if(x&&!x.checked)return null;if(o&&o.includes(e.getAttribute("id")))return null;if(document.documentElement.scrollTop>=e.offsetTop&&a){var t,n=e.getAttribute("id");f.querySelectorAll("a").forEach(function(e){e.classList.remove("active")}),f.querySelector('a[href="#'+n+'"]')?f.querySelector('a[href="#'+n+'"]').classList.add("active"):null,!1===E||(a.querySelectorAll("ul")?a.querySelectorAll("ul").forEach(function(e){e.querySelectorAll("li").forEach(function(e){e.querySelectorAll("ul").forEach(function(e){e.style.display="none"})})}):null),t=a.querySelector("[href='#"+n+"']"),t&&t.nextElementSibling&&(t.nextElementSibling.style.display="block"),getParents(t,"ul")?getParents(t,"ul").forEach(function(e){e.style.display="block"}):null}}):(b&&(b.setAttribute("data-position",""),b.classList.contains("hide")||b.classList.add("hide")),j&&(j.setAttribute("data-position",""),j.classList.contains("hide")||j.classList.add("hide"))))}else e<250&&(v.style.display="none"),t.classList.contains("scrolling")&&(t.classList.contains("navbar--hide")?t.classList.remove("navbar--hide"):t.classList.contains("navbar--show")||t.classList.add("navbar--show")),d&&(d.querySelectorAll(r).length>0?d.querySelectorAll(r).forEach(function(e){if(x&&!x.checked)return null;if(o&&o.includes(e.getAttribute("id")))return null;if(document.documentElement.scrollTop>=e.offsetTop&&a){var t,n=e.getAttribute("id");f.querySelectorAll("a").forEach(function(e){e.classList.remove("active")}),f.querySelector('a[href="#'+n+'"]')?f.querySelector('a[href="#'+n+'"]').classList.add("active"):null,!1===E||(a.querySelectorAll("ul")?a.querySelectorAll("ul").forEach(function(e){e.querySelectorAll("li").forEach(function(e){e.querySelectorAll("ul").forEach(function(e){e.style.display="none"})})}):null),t=a.querySelector("[href='#"+n+"']"),t&&t.nextElementSibling&&(t.nextElementSibling.style.display="block"),getParents(t,"ul")?getParents(t,"ul").forEach(function(e){e.style.display="block"}):null}}):(b&&!b.classList.contains("hide")&&b.classList.add("hide"),j&&!j.classList.contains("hide")&&j.classList.add("hide"))),a&&document.documentElement.scrollTop<250&&(!1===E||(a.querySelector("ul")?a.querySelector("ul").querySelectorAll("li").forEach(function(e){e.querySelectorAll("ul").forEach(function(e){e.style.display="none"})}):null));I=e<=0?0:e},k=localStorage.getItem("theme"),A=document.getElementById("root"),le=document.querySelectorAll(".select-theme"),C=document.querySelectorAll(".select-theme__item"),ue=JSON.parse('"dark"'),me=JSON.parse('"light"'),he=JSON.parse('"hacker"'),de=JSON.parse('"solarized"'),G=JSON.parse('"kimbie"'),M=function(e){var t=document.getElementsByName("msapplication-TileColor")[0],n=document.getElementsByName("theme-color")[0],s=document.getElementsByName("msapplication-navbutton-color")[0],o=document.getElementsByName("apple-mobile-web-app-status-bar-style")[0];e.includes("dark")?(t.setAttribute("content","#fcfcfa"),n.setAttribute("content","#403E41"),s.setAttribute("content","#403E41"),o.setAttribute("content","#403E41")):e.includes("light")?(t.setAttribute("content","#555"),n.setAttribute("content","#eee"),s.setAttribute("content","#eee"),o.setAttribute("content","#eee")):e.includes("hacker")?(t.setAttribute("content","#e3cd26"),n.setAttribute("content","#252526"),s.setAttribute("content","#252526"),o.setAttribute("content","#252526")):e.includes("solarized")?(t.setAttribute("content","#d3af86"),n.setAttribute("content","#51412c"),s.setAttribute("content","#51412c"),o.setAttribute("content","#51412c")):e.includes("kimbie")&&(t.setAttribute("content","#586e75"),n.setAttribute("content","#eee8d5"),s.setAttribute("content","#eee8d5"),o.setAttribute("content","#eee8d5"))},ae=function(e){if(e===ue)return"dark";if(e===me)return"light";if(e===he)return"hacker";if(e===de)return"solarized";if(e===G)return"kimbie"},k?(C?C.forEach(function(e){e.text.trim()===k?e.classList.add("is-active"):e.classList.remove("is-active")}):null,M(k)):M(A.className),C?C.forEach(function(e){e.addEventListener("click",function(e){var n,s,t=ae(e.target.text.trim());localStorage.setItem("theme",t),M(t),A.removeAttribute("class"),A.classList.add("theme__"+t),le.forEach(function(e){e.querySelectorAll("a").forEach(function(e){e.classList&&(e.text.trim()===t?e.classList.contains("is-active")||e.classList.add("is-active"):e.classList.contains("is-active")&&e.classList.remove("is-active"))})}),window.mermaid&&(t==="dark"||t==="hacker"?(mermaid.initialize({theme:"dark"}),location.reload()):(mermaid.initialize({theme:"default"}),location.reload())),n=document.getElementById("utterances"),n&&n.querySelector("iframe").contentWindow.postMessage({type:"set-theme",theme:t==="dark"||t==="hacker"?"photon-dark":t==="kimbie"?"github-dark-orange":"github-light"},"https://utteranc.es"),s=document.querySelectorAll(".twitter-timeline"),s&&window.postMessage({type:"set-twitter-theme",theme:t==="light"||t==="solarized"?"light":"dark"})})}):null,ie=JSON.parse('"https://yslinwe.github.io"'),Y=JSON.parse('"https://yslinwe.github.io/posts/supervisor%E4%BD%BF%E7%94%A8/"'),oe=JSON.parse('""'),c=null,l=null,n=null,Q=JSON.parse("true"),W=JSON.parse("100"),U=JSON.parse("0.4"),re=JSON.parse("true"),w=JSON.parse("true"),B=JSON.parse('"main"'),K=JSON.parse('"posts"'),X=JSON.parse('"page"'),O=null,Q&&function(){var t=new XMLHttpRequest;K==="publication"&&X!=="page"?t.open("GET",Y+"index.json"):t.open("GET",ie+oe+"/index.json"),t.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.onload=function(){t.status===200?(O=new Fuse(JSON.parse(t.response.toString("utf-8")),{keys:K.includes("publication")?["title","abstract"]:re?["title","description","content"]:["title","description"],includeMatches:w,shouldSort:!0,threshold:U||.4,location:0,distance:W||100,maxPatternLength:32,minMatchCharLength:1,isCaseSensitive:!1,findAllMatches:!1,useExtendedSearch:!1}),window.fuse=O):console.error("["+t.status+"]Error:",t.statusText)},t.send()}();function _e(e,t){var n,s,o=document.createElement("li");o.className="search-result__item",n=document.createElement("a"),n.innerHTML=t.item.title,n.setAttribute("class","search-result__item--title"),n.setAttribute("href",t.item.permalink),s=document.createElement("div"),s.setAttribute("class","search-result__item--desc"),t.item.description?s.innerHTML=t.item.description:t.item.content&&(s.innerHTML=t.item.content.substring(0,225)),o.appendChild(n),o.appendChild(s),e.appendChild(o)}function ye(e,t){var n,s,o,i=document.createElement("li");if(i.className="search-result__item",n=null,o=document.createElement("a"),o.innerHTML=t.item.title,o.setAttribute("class","search-result__item--title"),o.setAttribute("href",t.item.uri),t.matches&&t.matches.length){for(s=0;s<t.matches.length;s++)"title"===t.matches[s].key&&(o=document.createElement("a"),o.innerHTML=m(t.matches[s].value,t.matches[s].indices),o.setAttribute("class","search-result__item--title"),o.setAttribute("href",t.item.uri)),"description"===t.matches[s].key?(n=document.createElement("div"),n.setAttribute("class","search-result__item--desc"),n.innerHTML=m(t.item.description,t.matches[s].indices)):"content"===t.matches[s].key?n||(n=document.createElement("div"),n.setAttribute("class","search-result__item--desc"),n.innerHTML=m(t.item.content.substring(0,150),t.matches[s].indices)):t.item.description?(n=document.createElement("div"),n.setAttribute("class","search-result__item--desc"),n.innerHTML=t.item.description):(n=document.createElement("div"),n.setAttribute("class","search-result__item--desc"),n.innerHTML=t.item.content.substring(0,150));i.appendChild(o),n&&i.appendChild(n),i&&e.appendChild(i)}}function ee(e,t){c=document.getElementById("search-results"),l=document.getElementById("search-menu"),c.setAttribute("class","dropdown is-active");var s,n=document.createElement("ul");for(n.setAttribute("class","dropdown-content search-content"),t.length?t.forEach(function(e){var t,o,i=document.createElement("li"),s=document.createElement("a");s.setAttribute("href",e.uri),s.setAttribute("class","dropdown-item"),s.appendChild(i),o=document.createElement("div"),o.innerHTML=e.title,o.setAttribute("class","menu-item__title"),t=document.createElement("div"),t.setAttribute("class","menu-item__desc"),e.description?t.innerHTML=e.description:e.content&&(t.innerHTML=e.content.substring(0,150)),i.appendChild(o),i.appendChild(t),n.appendChild(s)}):(s=document.createElement("li"),s.setAttribute("class","dropdown-item"),s.innerText="No results found",n.appendChild(s));l.hasChildNodes();)l.removeChild(l.lastChild);l.appendChild(n)}function te(e,t){c=document.getElementById("search-results"),l=document.getElementById("search-menu"),c.setAttribute("class","dropdown is-active");var s,n=document.createElement("ul");for(n.setAttribute("class","dropdown-content search-content"),t.length?t.forEach(function(e){var s,o,a=document.createElement("li"),i=document.createElement("a"),t=null;if(i.setAttribute("href",e.item.uri),i.setAttribute("class","dropdown-item"),i.appendChild(a),o=document.createElement("div"),o.innerHTML=e.item.title,o.setAttribute("class","menu-item__title"),e.matches&&e.matches.length){for(s=0;s<e.matches.length;s++)"title"===e.matches[s].key&&(o.innerHTML=m(e.matches[s].value,e.matches[s].indices)),"description"===e.matches[s].key?(t=document.createElement("div"),t.setAttribute("class","menu-item__desc"),t.innerHTML=m(e.item.description,e.matches[s].indices)):"content"===e.matches[s].key?t||(t=document.createElement("div"),t.setAttribute("class","menu-item__desc"),t.innerHTML=m(e.item.content.substring(0,150),e.matches[s].indices)):e.item.description?(t=document.createElement("div"),t.setAttribute("class","menu-item__desc"),t.innerHTML=e.item.description):(t=document.createElement("div"),t.setAttribute("class","menu-item__desc"),t.innerHTML=e.item.content.substring(0,150));a.appendChild(o),t&&a.appendChild(t),n.appendChild(i)}}):(s=document.createElement("li"),s.setAttribute("class","dropdown-item"),s.innerText="No results found",n.appendChild(s));l.hasChildNodes();)l.removeChild(l.lastChild);l.appendChild(n)}function ne(e,t){c=document.getElementById("search-mobile-results");var o,n=document.createElement("div");n.setAttribute("class","mobile-search__content"),t.length>0?t.forEach(function(e){var t=document.createElement("a");t.setAttribute("href",e.uri),t.innerHTML='<div class="mobile-search__item"><div class="mobile-search__item--title">📄 '+e.title+'</div><div class="mobile-search__item--desc">'+(e.description?e.description:e.content)+"</div></div>",n.appendChild(t)}):(o=document.createElement("span"),n.appendChild(o));let s=document.getElementById("search-mobile-results");for(;s.firstChild;)s.removeChild(s.firstChild);c.appendChild(n)}function je(e,t){c=document.getElementById("search-mobile-results");var o,n=document.createElement("div");n.setAttribute("class","mobile-search__content"),t.length?t.forEach(function(e){var s,o,i=document.createElement("li"),a=document.createElement("a"),t=null;if(a.setAttribute("href",e.item.uri),a.appendChild(i),i.setAttribute("class","mobile-search__item"),o=document.createElement("div"),o.innerHTML=e.item.title,o.setAttribute("class","mobile-search__item--title"),e.matches&&e.matches.length){for(s=0;s<e.matches.length;s++)"title"===e.matches[s].key&&(o.innerHTML=m(e.matches[s].value,e.matches[s].indices)),"description"===e.matches[s].key?(t=document.createElement("div"),t.setAttribute("class","mobile-search__item--desc"),t.innerHTML=m(e.item.description,e.matches[s].indices)):"content"===e.matches[s].key?t||(t=document.createElement("div"),t.setAttribute("class","mobile-search__item--desc"),t.innerHTML=m(e.item.content.substring(0,150),e.matches[s].indices)):e.item.description?(t=document.createElement("div"),t.setAttribute("class","mobile-search__item--desc"),t.innerHTML=e.item.description):(t=document.createElement("div"),t.setAttribute("class","mobile-search__item--desc"),t.innerHTML=e.item.content.substring(0,150));i.appendChild(o),t&&i.appendChild(t),n.appendChild(a)}}):(o=document.createElement("span"),n.appendChild(o));let s=document.getElementById("search-mobile-results");for(;s.firstChild;)s.removeChild(s.firstChild);c.appendChild(n)}function m(e,t){if(!t)return e;var n="",s=0;return t.forEach(function(t){if(t[0]===t[1])return null;n+=""+e.substring(s,t[0])+'<span class="search__highlight">'+e.substring(t[0],t[1]+1)+"</span>",s=t[1]+1}),n+=e.substring(s),n}u=document.getElementById("search"),L=document.getElementById("search-mobile"),g=document.getElementById("search-results"),u?u.addEventListener("input",function(e){if(!e.target.value|window.innerWidth<770)return g?g.setAttribute("class","dropdown"):null,i?i.setAttribute("data-display","none"):null,s?s.setAttribute("data-display","block"):null,null;n=e.target.value;var o,t=O.search(e.target.value);B==="main"?w?Z(n,t):J(n,t):(w?te(n,t):ee(n,t),o=g.querySelectorAll(".dropdown-item"),o?o.forEach(function(e){e.addEventListener("mousedown",function(e){e.target.click()})}):null)}):null,u?u.addEventListener("blur",function(){if(window.innerWidth<770)return null;g?g.setAttribute("class","dropdown"):null}):null,u?u.addEventListener("click",function(e){if(window.innerWidth<770)return null;if(!e.target.value)return g?g.setAttribute("class","dropdown"):null,null;n=e.target.value;var s,t=O.search(e.target.value);B==="main"?w?Z(n,t):J(n,t):(w?te(n,t):ee(n,t),s=g.querySelectorAll(".dropdown-item"),s?s.forEach(function(e){e.addEventListener("mousedown",function(e){e.target.click()})}):null)}):null,ge=document.getElementById("search-menu"),pe=document.querySelector("#search-menu .dropdown-item.is-active"),e=null,fe=null,D=350,u?u.addEventListener("keydown",function(t){if(window.innerWidth<770)return null;t.key==="Escape"&&(i?i.setAttribute("data-display","none"):null,s?s.setAttribute("data-display","block"):null);var n=document.querySelectorAll("#search-menu .dropdown-item"),o=t.which||t.keyCode;if(!n||!n.length)return null;if(t.key==="ArrowDown"||o===40){e===null?(e=0,n[e].classList.remove("is-active")):(n[e].classList.remove("is-active"),e=e===n.length-1?0:e+1),n[e].classList.add("is-active");let t=n[e].offsetTop+n[e].clientHeight-D;t>0?document.querySelector(".search-content").scrollTop+=n[e].getBoundingClientRect().height:e===0&&(document.querySelector(".search-content").scrollTop=0)}else if(t.key==="ArrowUp"||o===38){e===null?(e=n.length-1,n[e].classList.remove("is-active")):(n[e].classList.remove("is-active"),e=e===0?n.length-1:e-1),n[e].classList.add("is-active");let t=n[e].offsetTop+n[e].clientHeight-D;t<0?document.querySelector(".search-content").scrollTop-=n[e].getBoundingClientRect().height:document.querySelector(".search-content").scrollTop=t+n[e].getBoundingClientRect().height}else t.key==="Enter"||o===13?n[e]&&n[e].getAttribute("href")&&(location.href=n[e].getAttribute("href")):(t.key==="Escape"||o===27)&&(t.target.value=null,c&&c.classList.remove("is-active"))}):null,L?L.addEventListener("input",function(e){if(!e.target.value){let e=document.getElementById("search-mobile-results");for(;e.firstChild;)e.removeChild(e.firstChild);return null}n=e.target.value;var t=O.search(e.target.value);ne(n,t),w?je(n,t):ne(n,t)}):null,p=document.querySelector("#search-mobile"),N=document.querySelector(".mobile-search"),R=document.querySelectorAll(".navbar-search"),z=document.querySelector("#search-mobile-close"),_=document.querySelector("#search-mobile-container"),h=document.querySelector("#search-mobile-results"),y=document.querySelector("html"),N&&(N.style.display="none"),R?R.forEach(function(e){e.addEventListener("click",function(){_&&(_.style.display="block"),p&&p.focus(),y&&(y.style.overflowY="hidden")})}):null,z?z.addEventListener("click",function(){if(_&&(_.style.display="none"),p&&(p.value=""),h)for(;h.firstChild;)h.removeChild(h.firstChild);y&&(y.style.overflowY="visible")}):null,p?p.addEventListener("keydown",function(e){var t=e.which||e.keyCode;if(e.key==="Escape"||t===27){if(_&&(_.style.display="none"),p&&(p.value=""),h)for(;h.firstChild;)h.removeChild(h.firstChild);y&&(y.style.overflowY="visible")}}):null;function J(e,t){var a=document.querySelector(".search-result__body"),n=a.querySelector("ul"),o=document.createElement("ul");e?t&&t&&t.length&&(t.forEach(function(e){_e(o,e)}),i?i.setAttribute("data-display","block"):null,s?s.setAttribute("data-display","none"):null):(i?i.setAttribute("data-display","none"):null,s?s.setAttribute("data-display","block"):null),n.parentNode.replaceChild(o,n)}function Z(e,t){var a=document.querySelector(".search-result__body"),n=a.querySelector("ul"),o=document.createElement("ul");e?t&&t&&t.length&&(t.forEach(function(e){ye(o,e)}),i?i.setAttribute("data-display","block"):null,s?s.setAttribute("data-display","none"):null):(i?i.setAttribute("data-display","none"):null,s?s.setAttribute("data-display","block"):null),n.parentNode.replaceChild(o,n)}})</script><link rel=stylesheet href=/css/main.min.css><meta name=description content="好好学习，天天向上。"><meta name=keywords content="Supervisor"><meta name=created content="2021-10-28T00:00:00+0000"><meta name=modified content="2021-10-28T00:00:00+0000"><meta property="article:published_time" content="2021-10-28T00:00:00+0000"><meta name=author content="YSL"><meta property="article:author" content="https://yslinwe.github.io/posts/supervisor%E4%BD%BF%E7%94%A8/@YSL"><meta property="og:site_name" content="我的学习博客"><meta property="og:title" content="Supervisor使用"><meta property="og:url" content="https://yslinwe.github.io/posts/supervisor%E4%BD%BF%E7%94%A8/"><meta property="og:type" content="article"><meta property="og:description" content="好好学习，天天向上。"><meta name=generator content="Hugo 0.121.2"><meta name=msapplication-TileColor content="#fff"><meta name=theme-color content="#fff"><meta name=msapplication-navbutton-color content="#fff"><meta name=apple-mobile-web-app-status-bar-style content="#fff"><link rel=canonical href=https://yslinwe.github.io/posts/supervisor%E4%BD%BF%E7%94%A8/><link rel=manifest href=/manifest.json><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=icon href=/favicon.png sizes=any type=image/png><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","headline":"Supervisor使用","datePublished":"2021-10-28T00:00:00Z","dateModified":"2021-10-28T00:00:00Z","url":"https://yslinwe.github.io/posts/supervisor%E4%BD%BF%E7%94%A8/","description":"Supervisor","keywords":["Supervisor"],"author":{"@type":"Person","name":"YSL"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://yslinwe.github.io"},"publisher":{"@type":"Organization","name":"我的学习博客","url":"https://yslinwe.github.io"}}</script></head><body id=root class=theme__dark><script>var localTheme=localStorage.getItem("theme");localTheme&&(document.getElementById("root").className="theme__"+localTheme)</script><div id=container><div class=wrapper data-type=posts data-kind=page><nav class="navbar scrolling" role=navigation aria-label="main navigation" data-dir=ltr><div class=navbar__brand><a href=/ title=主页 rel=home class=navbar__logo-link><img src=/logo.png alt=Home class=navbar__logo>
</a><a href=/ title=主页 rel=home class=navbar__title-link><h6 class=navbar__title>我的学习博客</h6></a></div><div class="theme theme-mobile" data-ani=true><div class=dropdown><button class="dropdown-trigger navbar__slide-down" aria-label="Select Theme Button" data-ani=true><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M24 0H0v24h24V0z"/><path fill="currentcolor" d="M6.34 7.93c-3.12 3.12-3.12 8.19.0 11.31C7.9 20.8 9.95 21.58 12 21.58s4.1-.78 5.66-2.34c3.12-3.12 3.12-8.19.0-11.31l-4.95-4.95c-.39-.39-1.02-.39-1.41.0L6.34 7.93zM12 19.59c-1.6.0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"/></svg></button><div class="dropdown-content select-theme"><a href=# class="dropdown-item select-theme__item is-active">dark
</a><a href=# class="dropdown-item select-theme__item">light
</a><a href=# class="dropdown-item select-theme__item">hacker
</a><a href=# class="dropdown-item select-theme__item">solarized
</a><a href=# class="dropdown-item select-theme__item">kimbie</a></div></div></div><div class="mobile-search__btn navbar-search" data-ani=true><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentcolor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49.0s.41-1.08.0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></div><div id=search-mobile-container class="mobile-search hide" data-dir=ltr><div class=mobile-search__top><input id=search-mobile type=text aria-label="Mobile Search" placeholder=搜索 class=mobile-search__top--input><div id=search-mobile-close class=mobile-search__top--icon><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path opacity=".87" fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41.0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg></div></div><div id=search-mobile-results class=mobile-search__body></div></div><a role=button class=navbar__burger aria-label=menu aria-expanded=false data-ani=true><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a><div class=navbarm__collapse data-open=false><ul dir=ltr><li class=navbarm__menu--item><a href=/learn>算法学习<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 9.29 12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41.0s.39 1.02.0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41.0L6.7 10.7c-.39-.39-.39-1.02.0-1.41.39-.38 1.03-.39 1.42.0z"/></svg></a></li><li class="navbarm__menu--item navbarm__menu--subitem"><a href=/presentation>PPT模板</a></li><li class="navbarm__menu--item navbarm__menu--subitem"><a href=/posts/%e5%89%91%e6%8c%87offer%e7%9b%ae%e5%bd%95>剑指offer</a></li><li class=navbarm__menu--item><a href=/gallery>吃喝玩乐<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 9.29 12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41.0s.39 1.02.0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41.0L6.7 10.7c-.39-.39-.39-1.02.0-1.41.39-.38 1.03-.39 1.42.0z"/></svg></a></li><li class="navbarm__menu--item navbarm__menu--subitem"><a href="https://www.pexels.com/zh-cn/search/%E6%99%AF%E8%A7%80/?orientation=landscape">图片</a></li><li class="navbarm__menu--item navbarm__menu--subitem"><a href=https://yslinwe.tk/>视频</a></li><li class="navbarm__menu--item navbarm__menu--subitem"><a href=https://popo-music.vercel.app/>音乐</a></li><li class=navbarm__menu--item><a href=/archive>历史墙</a></li><li class=navbarm__menu--item><a href=/tags class=navbarm__menu--term data-index=0>标签</a></li><li class=navbarm__menu--item><a href=/categories class=navbarm__menu--term data-index=1>分类</a></li><li class=navbarm__menu--item><a href=/series class=navbarm__menu--term data-index=2>系列</a></li></ul></div><div class=navbar__menu><div class=theme><div class=dropdown><button class="dropdown-trigger navbar__slide-down navbar-search" aria-label="Search Button" data-ani=true><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentcolor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49.0s.41-1.08.0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></button><div class=dropdown-content></div></div></div><div class=theme data-ani=true><div class=dropdown><button class="dropdown-trigger navbar__slide-down" aria-label="Select Theme Button" data-ani=true><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M24 0H0v24h24V0z"/><path fill="currentcolor" d="M6.34 7.93c-3.12 3.12-3.12 8.19.0 11.31C7.9 20.8 9.95 21.58 12 21.58s4.1-.78 5.66-2.34c3.12-3.12 3.12-8.19.0-11.31l-4.95-4.95c-.39-.39-1.02-.39-1.41.0L6.34 7.93zM12 19.59c-1.6.0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"/></svg></button><div class="dropdown-content select-theme"><a href=# class="dropdown-item select-theme__item is-active">dark
</a><a href=# class="dropdown-item select-theme__item">light
</a><a href=# class="dropdown-item select-theme__item">hacker
</a><a href=# class="dropdown-item select-theme__item">solarized
</a><a href=# class="dropdown-item select-theme__item">kimbie</a></div></div></div><div class="navbar__dropdown navbar__slide-down" data-ani=true><a href=/learn class=navbar__menu-item dir=ltr>算法学习<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 9.29 12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41.0s.39 1.02.0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41.0L6.7 10.7c-.39-.39-.39-1.02.0-1.41.39-.38 1.03-.39 1.42.0z"/></svg></a><div class=navbar__dropdown--content><a href=/presentation class=navbar__dropdown--item dir=ltr>PPT模板</a>
<a href=/posts/%e5%89%91%e6%8c%87offer%e7%9b%ae%e5%bd%95 class=navbar__dropdown--item dir=ltr>剑指offer</a></div></div><div class="navbar__dropdown navbar__slide-down" data-ani=true><a href=/gallery class=navbar__menu-item dir=ltr>吃喝玩乐<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 9.29 12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41.0s.39 1.02.0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41.0L6.7 10.7c-.39-.39-.39-1.02.0-1.41.39-.38 1.03-.39 1.42.0z"/></svg></a><div class=navbar__dropdown--content><a href="https://www.pexels.com/zh-cn/search/%E6%99%AF%E8%A7%80/?orientation=landscape" class=navbar__dropdown--item dir=ltr>图片</a>
<a href=https://yslinwe.tk/ class=navbar__dropdown--item dir=ltr>视频</a>
<a href=https://popo-music.vercel.app/ class=navbar__dropdown--item dir=ltr>音乐</a></div></div><a href=/archive class="navbar__menu-item navbar__slide-down" dir=ltr data-ani=true>历史墙</a></div></nav><main class="single__main main-main"><nav class="breadcrumb hide" aria-label=breadcrumbs><script>document.querySelector(".breadcrumb").classList.remove("hide")</script><ol><li><a href=https://yslinwe.github.io/ class=capitalize>我的学习博客</a></li><li><a href=https://yslinwe.github.io/posts/ class=capitalize>博客</a></li><li class=is-active><span>Supervisor使用</span></li></ol></nav><div class=single><div class=single__nojs>Please enable Javascript to view the contents</div><script>document.querySelector(".single").classList.remove("hide"),document.querySelector(".single__nojs").classList.add("hide")</script><h2 class=single__title data-ani=true>Supervisor使用</h2><h3 class=single__subtitle></h3><div class=single__meta><div class=single__infos><time class=single__info title=创建日期>📅&nbsp;2021年10月28日 </time>&nbsp;&#183;&nbsp; <span class=single__info title=阅读时长>☕&nbsp;17&nbsp;分钟 </span>&nbsp;&#183;&nbsp; <span class=single__info title=作者>✍️&nbsp;YSL</span>
<span class=single__info></span></div><ul class="single__tags caption">🏷️<li><a href=https://yslinwe.github.io/tags/supervisor/ class=single__tag title=Supervisor>#Supervisor</a></li></ul></div><article class=single__contents data-dir=ltr data-ani=true><h3 id=supervisor>Supervisor</h3><p>Supervisor是一个进程监控程序。可以查看进程执行状态, 启动异常终止的进程。</p><h3 id=使用场景>使用场景</h3><ul><li>我现在有一个进程需要每时每刻不断的跑，但是这个进程又有可能由于各种原因有可能中断。当进程中断的时候我希望能自动重新启动它，此时，我就需要使用到了Supervisor，相当于将一个普通后台变成了守护进程；</li><li>有一个脚本需要自定义时间执行（实现想什么时候执行就点一下执行按钮的效果），可以打开Supervisor web页点击执行。</li></ul><h3 id=安装使用教程>安装使用教程</h3><h4 id=ubuntu安装>ubuntu安装：</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=nx>apt</span><span class=o>-</span><span class=nx>get</span> <span class=nx>install</span> <span class=nx>supervisor</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=centos安装>centos安装：</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>#安装setuptools
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>yum</span> <span class=nx>install</span> <span class=nx>python</span><span class=o>-</span><span class=nx>setuptools</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#安装supervisor
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>easy_install</span> <span class=nx>supervisor</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#测试安装是否成功：
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>echo_supervisord_conf</span>
</span></span><span class=line><span class=cl><span class=c1>#上面语句若输出配置文件信息表示安装成功
</span></span></span></code></pre></td></tr></table></div></div><h3 id=创建进程管理配置文件>创建进程管理配置文件</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 若没有配置文件，创建supervisor配置文件，注意先检查下有没有</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ubuntu </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/etc/supervisor/supervisord.conf 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>有的系统是 /etc/supervisord.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建配置文件</span>
</span></span><span class=line><span class=cl>echo_supervisord_conf &gt; /etc/supervisor/supervisord.conf 
</span></span></code></pre></td></tr></table></div></div><ul><li>1、在supervisord.conf 最后增加其他进程配置文件引入</li></ul><p>supervisord.conf</p><pre tabindex=0><code>[include]
files = /etc/supervisor/conf.d/*.conf
</code></pre><ul><li>2、在 /etc/supervisor/conf.d/ 目录下创建各子进程配置文件</li></ul><p>/etc/supervisor/conf.d/v2.conf</p><pre tabindex=0><code>[program:v2_queue]          ;进程名
command                 = /usr/local/php/bin/php /alidata/www/v2/current/artisan queue:work --sleep=3 --tries=3     ; 进程对应的命令
process_name            = %(program_name)s_%(process_num)s
numprocs                = 1              ; 启动子进程个数，如队列可以启动多个消费队列进程，根据实际需要设置
user=www                                ;设置执行用户，可以用来管理该listener进程。
autostart               = true           ;supervisor启动的时候是否随着同时启动
autorestart             = true          ;当程序退出的时候，这个program会自动重启
startsecs=1                               ;程序重启时候停留在runing状态的秒数，设为1表示启动 1 秒后没有异常退出，就当作已经正常启动了
startretries=3                            ;启动失败自动重试次数，默认是 3
stdout_logfile          = /alidata/log/supervisor/v2_queue_out.log    ; 输出日志
stdout_logfile_maxbytes = 10MB              ; 输出日志文件最大大小
stderr_logfile          = /alidata/log/supervisor/v2_queue_err.log     ; 错误日志
stderr_logfile_maxbytes = 10MB     ; 输出日志文件最大大小
redirect_stderr=false                      ; 把 stderr 重定向到 stdout，默认 false
</code></pre><p>有的操作系统好像是 *.ini 来，这个要注意。</p><h3 id=supervisorctl-配置文件说明>supervisorctl 配置文件说明</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span><span class=lnt>209
</span><span class=lnt>210
</span><span class=lnt>211
</span><span class=lnt>212
</span><span class=lnt>213
</span><span class=lnt>214
</span><span class=lnt>215
</span><span class=lnt>216
</span><span class=lnt>217
</span><span class=lnt>218
</span><span class=lnt>219
</span><span class=lnt>220
</span><span class=lnt>221
</span><span class=lnt>222
</span><span class=lnt>223
</span><span class=lnt>224
</span><span class=lnt>225
</span><span class=lnt>226
</span><span class=lnt>227
</span><span class=lnt>228
</span><span class=lnt>229
</span><span class=lnt>230
</span><span class=lnt>231
</span><span class=lnt>232
</span><span class=lnt>233
</span><span class=lnt>234
</span><span class=lnt>235
</span><span class=lnt>236
</span><span class=lnt>237
</span><span class=lnt>238
</span><span class=lnt>239
</span><span class=lnt>240
</span><span class=lnt>241
</span><span class=lnt>242
</span><span class=lnt>243
</span><span class=lnt>244
</span><span class=lnt>245
</span><span class=lnt>246
</span><span class=lnt>247
</span><span class=lnt>248
</span><span class=lnt>249
</span><span class=lnt>250
</span><span class=lnt>251
</span><span class=lnt>252
</span><span class=lnt>253
</span><span class=lnt>254
</span><span class=lnt>255
</span><span class=lnt>256
</span><span class=lnt>257
</span><span class=lnt>258
</span><span class=lnt>259
</span><span class=lnt>260
</span><span class=lnt>261
</span><span class=lnt>262
</span><span class=lnt>263
</span><span class=lnt>264
</span><span class=lnt>265
</span><span class=lnt>266
</span><span class=lnt>267
</span><span class=lnt>268
</span><span class=lnt>269
</span><span class=lnt>270
</span><span class=lnt>271
</span><span class=lnt>272
</span><span class=lnt>273
</span><span class=lnt>274
</span><span class=lnt>275
</span><span class=lnt>276
</span><span class=lnt>277
</span><span class=lnt>278
</span><span class=lnt>279
</span><span class=lnt>280
</span><span class=lnt>281
</span><span class=lnt>282
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=na>[unix_http_server]            </span>
</span></span><span class=line><span class=cl><span class=na>file</span><span class=o>=</span><span class=s>/tmp/supervisor.sock   ; socket文件的路径，supervisorctl用XML_RPC和supervisord通信就是通过它进行
</span></span></span><span class=line><span class=cl><span class=s>                              的。如果不设置的话，supervisorctl也就不能用了  
</span></span></span><span class=line><span class=cl><span class=s>                              不设置的话，默认为none。 非必须设置        </span>
</span></span><span class=line><span class=cl><span class=c1>;chmod=0700                 ; 这个简单，就是修改上面的那个socket文件的权限为0700</span>
</span></span><span class=line><span class=cl>                              <span class=na>不设置的话，默认为0700。 非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;chown=nobody:nogroup       ; 这个一样，修改上面的那个socket文件的属组为user.group</span>
</span></span><span class=line><span class=cl>                              <span class=na>不设置的话，默认为启动supervisord进程的用户及属组。非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;username=user              ; 使用supervisorctl连接的时候，认证的用户</span>
</span></span><span class=line><span class=cl>                               <span class=na>不设置的话，默认为不需要用户。 非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;password=123               ; 和上面的用户名对应的密码，可以直接使用明码，也可以使用SHA加密</span>
</span></span><span class=line><span class=cl>                              <span class=na>如：{SHA}82ab876d1387bfafe46cc1c8a2ef074eae50cb1d</span>
</span></span><span class=line><span class=cl>                              <span class=na>默认不设置。。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;[inet_http_server]         ; 侦听在TCP上的socket，Web Server和远程的supervisorctl都要用到他</span>
</span></span><span class=line><span class=cl>                              <span class=na>不设置的话，默认为不开启。非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;port=127.0.0.1:9001        ; 这个是侦听的IP和端口，侦听所有IP用 :9001或*:9001。</span>
</span></span><span class=line><span class=cl>                              <span class=na>这个必须设置，只要上面的[inet_http_server]开启了，就必须设置它</span>
</span></span><span class=line><span class=cl><span class=c1>;username=user              ; 这个和上面的uinx_http_server一个样。非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;password=123               ; 这个也一个样。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=na>[supervisord]                ;这个主要是定义supervisord这个服务端进程的一些参数的</span>
</span></span><span class=line><span class=cl>                              <span class=na>这个必须设置，不设置，supervisor就不用干活了</span>
</span></span><span class=line><span class=cl><span class=na>logfile</span><span class=o>=</span><span class=s>/tmp/supervisord.log ; 这个是supervisord这个主进程的日志路径，注意和子进程的日志不搭嘎。
</span></span></span><span class=line><span class=cl><span class=s>                               默认路径$CWD/supervisord.log，$CWD是当前目录。。非必须设置</span>
</span></span><span class=line><span class=cl><span class=na>logfile_maxbytes</span><span class=o>=</span><span class=s>50MB        ; 这个是上面那个日志文件的最大的大小，当超过50M的时候，会生成一个新的日 
</span></span></span><span class=line><span class=cl><span class=s>                               志文件。当设置为0时，表示不限制文件大小
</span></span></span><span class=line><span class=cl><span class=s>                               默认值是50M，非必须设置。              </span>
</span></span><span class=line><span class=cl><span class=na>logfile_backups</span><span class=o>=</span><span class=s>10           ; 日志文件保持的数量，上面的日志文件大于50M时，就会生成一个新文件。文件
</span></span></span><span class=line><span class=cl><span class=s>                               数量大于10时，最初的老文件被新文件覆盖，文件数量将保持为10
</span></span></span><span class=line><span class=cl><span class=s>                               当设置为0时，表示不限制文件的数量。
</span></span></span><span class=line><span class=cl><span class=s>                               默认情况下为10。。。非必须设置</span>
</span></span><span class=line><span class=cl><span class=na>loglevel</span><span class=o>=</span><span class=s>info                ; 日志级别，有critical, error, warn, info, debug, trace, or blather等
</span></span></span><span class=line><span class=cl><span class=s>                               默认为info。。。非必须设置项</span>
</span></span><span class=line><span class=cl><span class=na>pidfile</span><span class=o>=</span><span class=s>/tmp/supervisord.pid ; supervisord的pid文件路径。
</span></span></span><span class=line><span class=cl><span class=s>                               默认为$CWD/supervisord.pid。。。非必须设置</span>
</span></span><span class=line><span class=cl><span class=na>nodaemon</span><span class=o>=</span><span class=s>false               ; 如果是true，supervisord进程将在前台运行
</span></span></span><span class=line><span class=cl><span class=s>                               默认为false，也就是后台以守护进程运行。。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=na>minfds</span><span class=o>=</span><span class=s>1024                  ; 这个是最少系统空闲的文件描述符，低于这个值supervisor将不会启动。
</span></span></span><span class=line><span class=cl><span class=s>                               系统的文件描述符在这里设置cat /proc/sys/fs/file-max
</span></span></span><span class=line><span class=cl><span class=s>                               默认情况下为1024。。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=na>minprocs</span><span class=o>=</span><span class=s>200                 ; 最小可用的进程描述符，低于这个值supervisor也将不会正常启动。
</span></span></span><span class=line><span class=cl><span class=s>                              ulimit  -u这个命令，可以查看linux下面用户的最大进程数
</span></span></span><span class=line><span class=cl><span class=s>                              默认为200。。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;umask=022                   ; 进程创建文件的掩码</span>
</span></span><span class=line><span class=cl>                               <span class=na>默认为022。。非必须设置项</span>
</span></span><span class=line><span class=cl><span class=c1>;user=chrism                 ; 这个参数可以设置一个非root用户，当我们以root用户启动supervisord之后。</span>
</span></span><span class=line><span class=cl>                               <span class=na>我这里面设置的这个用户，也可以对supervisord进行管理</span>
</span></span><span class=line><span class=cl>                               <span class=na>默认情况是不设置。。。非必须设置项</span>
</span></span><span class=line><span class=cl><span class=c1>;identifier=supervisor       ; 这个参数是supervisord的标识符，主要是给XML_RPC用的。当你有多个</span>
</span></span><span class=line><span class=cl>                               <span class=na>supervisor的时候，而且想调用XML_RPC统一管理，就需要为每个</span>
</span></span><span class=line><span class=cl>                               <span class=na>supervisor设置不同的标识符了</span>
</span></span><span class=line><span class=cl>                               <span class=na>默认是supervisord。。。非必需设置</span>
</span></span><span class=line><span class=cl><span class=c1>;directory=/tmp              ; 这个参数是当supervisord作为守护进程运行的时候，设置这个参数的话，启动</span>
</span></span><span class=line><span class=cl>                               <span class=na>supervisord进程之前，会先切换到这个目录</span>
</span></span><span class=line><span class=cl>                               <span class=na>默认不设置。。。非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;nocleanup=true              ; 这个参数当为false的时候，会在supervisord进程启动的时候，把以前子进程</span>
</span></span><span class=line><span class=cl>                               <span class=na>产生的日志文件(路径为AUTO的情况下)清除掉。有时候咱们想要看历史日志，当 </span>
</span></span><span class=line><span class=cl>                               <span class=na>然不想日志被清除了。所以可以设置为true</span>
</span></span><span class=line><span class=cl>                               <span class=na>默认是false，有调试需求的同学可以设置为true。。。非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;childlogdir=/tmp            ; 当子进程日志路径为AUTO的时候，子进程日志文件的存放路径。</span>
</span></span><span class=line><span class=cl>                               <span class=na>默认路径是这个东西，执行下面的这个命令看看就OK了，处理的东西就默认路径</span>
</span></span><span class=line><span class=cl>                               <span class=na>python -c &#34;import tempfile;print tempfile.gettempdir()&#34;</span>
</span></span><span class=line><span class=cl>                               <span class=na>非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;environment=KEY=&#34;value&#34;     ; 这个是用来设置环境变量的，supervisord在linux中启动默认继承了linux的</span>
</span></span><span class=line><span class=cl>                               <span class=na>环境变量，在这里可以设置supervisord进程特有的其他环境变量。</span>
</span></span><span class=line><span class=cl>                               <span class=na>supervisord启动子进程时，子进程会拷贝父进程的内存空间内容。 所以设置的</span>
</span></span><span class=line><span class=cl>                               <span class=na>这些环境变量也会被子进程继承。</span>
</span></span><span class=line><span class=cl>                               <span class=na>小例子：environment</span><span class=o>=</span><span class=s>name=&#34;haha&#34;,age=&#34;hehe&#34;
</span></span></span><span class=line><span class=cl><span class=s>                               默认为不设置。。。非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;strip_ansi=false            ; 这个选项如果设置为true，会清除子进程日志中的所有ANSI 序列。什么是ANSI</span>
</span></span><span class=line><span class=cl>                               <span class=na>序列呢？就是我们的\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\n,\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\t这些东西。</span>
</span></span><span class=line><span class=cl>                               <span class=na>默认为false。。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>; the below section must remain in the config file for RPC</span>
</span></span><span class=line><span class=cl><span class=c1>; (supervisorctl/web interface) to work, additional interfaces may be</span>
</span></span><span class=line><span class=cl><span class=c1>; added by defining them in separate rpcinterface: sections</span>
</span></span><span class=line><span class=cl><span class=na>[rpcinterface:supervisor]    ;这个选项是给XML_RPC用的，当然你如果想使用supervisord或者web server 这 </span>
</span></span><span class=line><span class=cl>                              <span class=na>个选项必须要开启的</span>
</span></span><span class=line><span class=cl><span class=na>supervisor.rpcinterface_factory</span> <span class=o>=</span> <span class=s>supervisor.rpcinterface:make_main_rpcinterface </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=na>[supervisorctl]              ;这个主要是针对supervisorctl的一些配置  </span>
</span></span><span class=line><span class=cl><span class=na>serverurl</span><span class=o>=</span><span class=s>unix:///tmp/supervisor.sock ; 这个是supervisorctl本地连接supervisord的时候，本地UNIX socket
</span></span></span><span class=line><span class=cl><span class=s>                                        路径，注意这个是和前面的[unix_http_server]对应的
</span></span></span><span class=line><span class=cl><span class=s>                                        默认值就是unix:///tmp/supervisor.sock。。非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;serverurl=http://127.0.0.1:9001 ; 这个是supervisorctl远程连接supervisord的时候，用到的TCP socket路径</span>
</span></span><span class=line><span class=cl>                                   <span class=na>注意这个和前面的[inet_http_server]对应</span>
</span></span><span class=line><span class=cl>                                   <span class=na>默认就是http://127.0.0.1:9001。。。非必须项</span>
</span></span><span class=line><span class=cl>                               
</span></span><span class=line><span class=cl><span class=c1>;username=chris              ; 用户名</span>
</span></span><span class=line><span class=cl>                               <span class=na>默认空。。非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;password=123                ; 密码</span>
</span></span><span class=line><span class=cl>                              <span class=na>默认空。。非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;prompt=mysupervisor         ; 输入用户名密码时候的提示符</span>
</span></span><span class=line><span class=cl>                               <span class=na>默认supervisor。。非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;history_file=~/.sc_history  ; 这个参数和shell中的history类似，我们可以用上下键来查找前面执行过的命令</span>
</span></span><span class=line><span class=cl>                               <span class=na>默认是no file的。。所以我们想要有这种功能，必须指定一个文件。。。非</span>
</span></span><span class=line><span class=cl>                               <span class=na>必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>; 下面示例是创建子进程的配置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;[program:theprogramname]      ;这个就是咱们要管理的子进程了，&#34;:&#34;后面的是名字，最好别乱写和实际进程</span>
</span></span><span class=line><span class=cl>                                <span class=na>有点关联最好。这样的program我们可以设置一个或多个，一个program就是</span>
</span></span><span class=line><span class=cl>                                <span class=na>要被管理的一个进程</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;command=/bin/cat              ; 这个就是我们的要启动进程的命令路径了，可以带参数</span>
</span></span><span class=line><span class=cl>                                <span class=na>例子：/home/test.py -a &#39;hehe&#39;</span>
</span></span><span class=line><span class=cl>                                <span class=na>有一点需要注意的是，我们的command只能是那种在终端运行的进程，不能是</span>
</span></span><span class=line><span class=cl>                                <span class=na>守护进程。这个想想也知道了，比如说command</span><span class=o>=</span><span class=s>service httpd start。
</span></span></span><span class=line><span class=cl><span class=s>                                httpd这个进程被linux的service管理了，我们的supervisor再去启动这个命令
</span></span></span><span class=line><span class=cl><span class=s>                                这已经不是严格意义的子进程了。
</span></span></span><span class=line><span class=cl><span class=s>                                这个是个必须设置的项</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;process_name=%(program_name)s ; 这个是进程名，如果我们下面的numprocs参数为1的话，就不用管这个参数</span>
</span></span><span class=line><span class=cl>                                 <span class=na>了，它默认值%(program_name)s也就是上面的那个program冒号后面的名字，</span>
</span></span><span class=line><span class=cl>                                 <span class=na>但是如果numprocs为多个的话，那就不能这么干了。想想也知道，不可能每个</span>
</span></span><span class=line><span class=cl>                                 <span class=na>进程都用同一个进程名吧。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                                
</span></span><span class=line><span class=cl><span class=c1>;numprocs=1                    ; 启动进程的数目。当不为1时，就是进程池的概念，注意process_name的设置</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认为1    。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;directory=/tmp                ; 进程运行前，会前切换到这个目录</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认不设置。。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;umask=022                     ; 进程掩码，默认none，非必须</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;priority=999                  ; 子进程启动关闭优先级，优先级低的，最先启动，关闭的时候最后关闭</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认值为999 。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;autostart=true                ; 如果是true的话，子进程将在supervisord启动后被自动启动</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认就是true   。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;autorestart=unexpected        ; 这个是设置子进程挂掉后自动重启的情况，有三个选项，false,unexpected</span>
</span></span><span class=line><span class=cl>                                 <span class=na>和true。如果为false的时候，无论什么情况下，都不会被重新启动，</span>
</span></span><span class=line><span class=cl>                                 <span class=na>如果为unexpected，只有当进程的退出码不在下面的exitcodes里面定义的退 </span>
</span></span><span class=line><span class=cl>                                 <span class=na>出码的时候，才会被自动重启。当为true的时候，只要子进程挂掉，将会被无</span>
</span></span><span class=line><span class=cl>                                 <span class=na>条件的重启</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;startsecs=1                   ; 这个选项是子进程启动多少秒之后，此时状态如果是running，则我们认为启</span>
</span></span><span class=line><span class=cl>                                 <span class=na>动成功了，默认值为1 。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;startretries=3                ; 当进程启动失败后，最大尝试启动的次数。。当超过3次后，supervisor将把</span>
</span></span><span class=line><span class=cl>                                 <span class=na>此进程的状态置为FAIL</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认值为3 。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;exitcodes=0,2                 ; 注意和上面的的autorestart=unexpected对应。。exitcodes里面的定义的</span>
</span></span><span class=line><span class=cl>                                 <span class=na>退出码是expected的。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;stopsignal=QUIT               ; 进程停止信号，可以为TERM, HUP, INT, QUIT, KILL, USR1, or USR2等信号</span>
</span></span><span class=line><span class=cl>                                  <span class=na>默认为TERM 。。当用设定的信号去干掉进程，退出码会被认为是expected</span>
</span></span><span class=line><span class=cl>                                  <span class=na>非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;stopwaitsecs=10               ; 这个是当我们向子进程发送stopsignal信号后，到系统返回信息</span>
</span></span><span class=line><span class=cl>                                 <span class=na>给supervisord，所等待的最大时间。 超过这个时间，supervisord会向该</span>
</span></span><span class=line><span class=cl>                                 <span class=na>子进程发送一个强制kill的信号。</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认为10秒。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;stopasgroup=false             ; 这个东西主要用于，supervisord管理的子进程，这个子进程本身还有</span>
</span></span><span class=line><span class=cl>                                 <span class=na>子进程。那么我们如果仅仅干掉supervisord的子进程的话，子进程的子进程</span>
</span></span><span class=line><span class=cl>                                 <span class=na>有可能会变成孤儿进程。所以咱们可以设置可个选项，把整个该子进程的</span>
</span></span><span class=line><span class=cl>                                 <span class=na>整个进程组都干掉。 设置为true的话，一般killasgroup也会被设置为true。</span>
</span></span><span class=line><span class=cl>                                 <span class=na>需要注意的是，该选项发送的是stop信号</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认为false。。非必须设置。。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;killasgroup=false             ; 这个和上面的stopasgroup类似，不过发送的是kill信号</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;user=chrism                   ; 如果supervisord是root启动，我们在这里设置这个非root用户，可以用来</span>
</span></span><span class=line><span class=cl>                                 <span class=na>管理该program</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认不设置。。。非必须设置项</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;redirect_stderr=true          ; 如果为true，则stderr的日志会被写入stdout日志文件中</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认为false，非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;stdout_logfile=/a/path        ; 子进程的stdout的日志路径，可以指定路径，AUTO，none等三个选项。</span>
</span></span><span class=line><span class=cl>                                 <span class=na>设置为none的话，将没有日志产生。设置为AUTO的话，将随机找一个地方</span>
</span></span><span class=line><span class=cl>                                 <span class=na>生成日志文件，而且当supervisord重新启动的时候，以前的日志文件会被</span>
</span></span><span class=line><span class=cl>                                 <span class=na>清空。当 redirect_stderr</span><span class=o>=</span><span class=s>true的时候，sterr也会写进这个日志文件</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;stdout_logfile_maxbytes=1MB   ; 日志文件最大大小，和[supervisord]中定义的一样。默认为50</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;stdout_logfile_backups=10     ; 和[supervisord]定义的一样。默认10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;stdout_capture_maxbytes=1MB   ; 这个东西是设定capture管道的大小，当值不为0的时候，子进程可以从stdout</span>
</span></span><span class=line><span class=cl>                                 <span class=na>发送信息，而supervisor可以根据信息，发送相应的event。</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认为0，为0的时候表达关闭管道。。。非必须项</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;stdout_events_enabled=false   ; 当设置为ture的时候，当子进程由stdout向文件描述符中写日志的时候，将</span>
</span></span><span class=line><span class=cl>                                 <span class=na>触发supervisord发送PROCESS_LOG_STDOUT类型的event</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认为false。。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;stderr_logfile=/a/path        ; 这个东西是设置stderr写的日志路径，当redirect_stderr=true。这个就不用</span>
</span></span><span class=line><span class=cl>                                 <span class=na>设置了，设置了也是白搭。因为它会被写入stdout_logfile的同一个文件中</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认为AUTO，也就是随便找个地存，supervisord重启被清空。。非必须设置</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;stderr_logfile_maxbytes=1MB   ; 这个出现好几次了，就不重复了</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;stderr_logfile_backups=10     ; 这个也是</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;stderr_capture_maxbytes=1MB   ; 这个一样，和stdout_capture一样。 默认为0，关闭状态</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;stderr_events_enabled=false   ; 这个也是一样，默认为false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;environment=A=&#34;1&#34;,B=&#34;2&#34;       ; 这个是该子进程的环境变量，和别的子进程是不共享的</span>
</span></span><span class=line><span class=cl><span class=c1>;serverurl=AUTO                ; </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>; The below sample eventlistener section shows all possible</span>
</span></span><span class=line><span class=cl><span class=c1>; eventlistener subsection values, create one or more &#39;real&#39;</span>
</span></span><span class=line><span class=cl><span class=c1>; eventlistener: sections to be able to handle event notifications</span>
</span></span><span class=line><span class=cl><span class=c1>; sent by supervisor.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;[eventlistener:theeventlistenername] ;这个东西其实和program的地位是一样的，也是suopervisor启动的子进</span>
</span></span><span class=line><span class=cl>                                       <span class=na>程，不过它干的活是订阅supervisord发送的event。他的名字就叫</span>
</span></span><span class=line><span class=cl>                                       <span class=na>listener了。我们可以在listener里面做一系列处理，比如报警等等</span>
</span></span><span class=line><span class=cl>                                       <span class=na>楼主这两天干的活，就是弄的这玩意</span>
</span></span><span class=line><span class=cl><span class=c1>;command=/bin/eventlistener    ; 这个和上面的program一样，表示listener的可执行文件的路径</span>
</span></span><span class=line><span class=cl><span class=c1>;process_name=%(program_name)s ; 这个也一样，进程名，当下面的numprocs为多个的时候，才需要。否则默认就</span>
</span></span><span class=line><span class=cl>                                 <span class=na>OK了</span>
</span></span><span class=line><span class=cl><span class=c1>;numprocs=1                    ; 相同的listener启动的个数</span>
</span></span><span class=line><span class=cl><span class=c1>;events=EVENT                  ; event事件的类型，也就是说，只有写在这个地方的事件类型。才会被发送</span>
</span></span><span class=line><span class=cl>                      
</span></span><span class=line><span class=cl>                                 
</span></span><span class=line><span class=cl><span class=c1>;buffer_size=10                ; 这个是event队列缓存大小，单位不太清楚，楼主猜测应该是个吧。当buffer</span>
</span></span><span class=line><span class=cl>                                 <span class=na>超过10的时候，最旧的event将会被清除，并把新的event放进去。</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认值为10。。非必须选项</span>
</span></span><span class=line><span class=cl><span class=c1>;directory=/tmp                ; 进程执行前，会切换到这个目录下执行</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认为不切换。。。非必须</span>
</span></span><span class=line><span class=cl><span class=c1>;umask=022                     ; 淹没，默认为none，不说了</span>
</span></span><span class=line><span class=cl><span class=c1>;priority=-1                   ; 启动优先级，默认-1，也不扯了</span>
</span></span><span class=line><span class=cl><span class=c1>;autostart=true                ; 是否随supervisord启动一起启动，默认true</span>
</span></span><span class=line><span class=cl><span class=c1>;autorestart=unexpected        ; 是否自动重启，和program一个样，分true,false,unexpected等，注意</span>
</span></span><span class=line><span class=cl>                                  <span class=na>unexpected和exitcodes的关系</span>
</span></span><span class=line><span class=cl><span class=c1>;startsecs=1                   ; 也是一样，进程启动后跑了几秒钟，才被认定为成功启动，默认1</span>
</span></span><span class=line><span class=cl><span class=c1>;startretries=3                ; 失败最大尝试次数，默认3</span>
</span></span><span class=line><span class=cl><span class=c1>;exitcodes=0,2                 ; 期望或者说预料中的进程退出码，</span>
</span></span><span class=line><span class=cl><span class=c1>;stopsignal=QUIT               ; 干掉进程的信号，默认为TERM，比如设置为QUIT，那么如果QUIT来干这个进程</span>
</span></span><span class=line><span class=cl>                                 <span class=na>那么会被认为是正常维护，退出码也被认为是expected中的</span>
</span></span><span class=line><span class=cl><span class=c1>;stopwaitsecs=10               ; max num secs to wait b4 SIGKILL (default 10)</span>
</span></span><span class=line><span class=cl><span class=c1>;stopasgroup=false             ; send stop signal to the UNIX process group (default false)</span>
</span></span><span class=line><span class=cl><span class=c1>;killasgroup=false             ; SIGKILL the UNIX process group (def false)</span>
</span></span><span class=line><span class=cl><span class=c1>;user=chrism                   ;设置普通用户，可以用来管理该listener进程。</span>
</span></span><span class=line><span class=cl>                                <span class=na>默认为空。。非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;redirect_stderr=true          ; 为true的话，stderr的log会并入stdout的log里面</span>
</span></span><span class=line><span class=cl>                                <span class=na>默认为false。。。非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;stdout_logfile=/a/path        ; 这个不说了，好几遍了</span>
</span></span><span class=line><span class=cl><span class=c1>;stdout_logfile_maxbytes=1MB   ; 这个也是</span>
</span></span><span class=line><span class=cl><span class=c1>;stdout_logfile_backups=10     ; 这个也是</span>
</span></span><span class=line><span class=cl><span class=c1>;stdout_events_enabled=false   ; 这个其实是错的，listener是不能发送event</span>
</span></span><span class=line><span class=cl><span class=c1>;stderr_logfile=/a/path        ; 这个也是</span>
</span></span><span class=line><span class=cl><span class=c1>;stderr_logfile_maxbytes=1MB   ; 这个也是</span>
</span></span><span class=line><span class=cl><span class=c1>;stderr_logfile_backups        ; 这个不说了</span>
</span></span><span class=line><span class=cl><span class=c1>;stderr_events_enabled=false   ; 这个也是错的，listener不能发送event</span>
</span></span><span class=line><span class=cl><span class=c1>;environment=A=&#34;1&#34;,B=&#34;2&#34;       ; 这个是该子进程的环境变量</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认为空。。。非必须设置</span>
</span></span><span class=line><span class=cl><span class=c1>;serverurl=AUTO                ; override serverurl computation (childutils)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>; The below sample group section shows all possible group values,</span>
</span></span><span class=line><span class=cl><span class=c1>; create one or more &#39;real&#39; group: sections to create &#34;heterogeneous&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>; process groups.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;[group:thegroupname]  ;这个东西就是给programs分组，划分到组里面的program。我们就不用一个一个去操作了</span>
</span></span><span class=line><span class=cl>                         <span class=na>我们可以对组名进行统一的操作。 注意：program被划分到组里面之后，就相当于原来</span>
</span></span><span class=line><span class=cl>                         <span class=na>的配置从supervisor的配置文件里消失了。。。supervisor只会对组进行管理，而不再</span>
</span></span><span class=line><span class=cl>                         <span class=na>会对组里面的单个program进行管理了</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;programs=progname1,progname2  ; 组成员，用逗号分开</span>
</span></span><span class=line><span class=cl>                                 <span class=na>这个是个必须的设置项</span>
</span></span><span class=line><span class=cl><span class=c1>;priority=999                  ; 优先级，相对于组和组之间说的</span>
</span></span><span class=line><span class=cl>                                 <span class=na>默认999。。非必须选项</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>; The [include] section can just contain the &#34;files&#34; setting.  This</span>
</span></span><span class=line><span class=cl><span class=c1>; setting can list multiple files (separated by whitespace or</span>
</span></span><span class=line><span class=cl><span class=c1>; newlines).  It can also contain wildcards.  The filenames are</span>
</span></span><span class=line><span class=cl><span class=c1>; interpreted as relative to this file.  Included files *cannot*</span>
</span></span><span class=line><span class=cl><span class=c1>; include files themselves.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;[include]                         ;这个东西挺有用的，当我们要管理的进程很多的时候，写在一个文件里面</span>
</span></span><span class=line><span class=cl>                                    <span class=na>就有点大了。我们可以把配置信息写到多个文件中，然后include过来</span>
</span></span><span class=line><span class=cl><span class=c1>;files = relative/directory/*.ini</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=进程管理命令>进程管理命令</h3><p><a href=https://www.muouseo.com/article/nq5vrkqe7p.html><img src=https://www.muouseo.com/storage/images/2022/01/25/YRNmRTaZD7c1w9Y0PlqTFvakWGy58JeGoeolJe2f.png alt=img></a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># supervisord服务启动</span>
</span></span><span class=line><span class=cl>supervisord -c /etc/supervisord.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 不重启supervisord服务的情况下更新配置文件，会同步重启配置修改过的子进程</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sudo supervisorctl update
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#supervisor 服务客户端管理命令</span>
</span></span><span class=line><span class=cl>supervisorctl
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重新启动配置中的所有程序， 并同时重启 supervisord 服务，这个重启挺慢的，一般不建议用</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sudo supervisorctl reload 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 终止配置中的所有子进程</span>
</span></span><span class=line><span class=cl>sudo supervisorctl stop all
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 启动配置中的所有子进程</span>
</span></span><span class=line><span class=cl>sudo supervisorctl start all
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重启配置中所有子程序</span>
</span></span><span class=line><span class=cl>sudo supervisorctl restart all
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 启动配置中的某个子进程</span>
</span></span><span class=line><span class=cl>sudo supervisorctl start queue_dispose:*
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># supervisorctl 执行有时会报错找不到 supervisord.conf  文件，可使用 -c 参数指定</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sudo supervisorctl -c /etc/supervisor/supervisord.conf  status
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sudo supervisorctl -c /etc/supervisor/supervisord.conf stop   webWeiXinLoginList:webWeiXinLoginList_0
</span></span></code></pre></td></tr></table></div></div><h4 id=各命令是否会重启子进程>各命令是否会重启子进程</h4><p><a href=https://www.muouseo.com/article/nq5vrkqe7p.html><img src=https://www.muouseo.com/storage/images/2022/01/25/Szajt9UOU6RDeO8gxuZKIzObOIiKV2EYuz5LFyBL.png alt=img></a></p><p>在生产环境修改代码后重启进程，建议使用restart, 不要用 reload, 这个会同时重启 supervisord， 导致进程重启很慢。</p><p><strong>注意：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=mi>1</span><span class=nx>、每次修改配置文件后需进入supervisorctl，执行</span> <span class=nx>update</span> <span class=nx>，</span> <span class=nx>改动部分才能生效</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mi>2</span><span class=nx>、Supervisor主要有两个命令</span><span class=o>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>supervisord</span> <span class=o>:</span> <span class=nx>启动supervisor的服务器端</span>
</span></span><span class=line><span class=cl><span class=nx>supervisorctl：启动supervisor的命令行窗口，在该命令行中可执行start、stop、status、reload等操作。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mi>3</span><span class=nx>、php脚本执行报</span><span class=s1>&#39;BACKOFF  Exited too quickly (process log may have details)&#39;</span><span class=nx>错误解决</span><span class=o>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>对于执行时间很短的php脚本</span><span class=p>(</span><span class=nx>执行时间小于配置的</span> <span class=nx>startsecs</span><span class=p>)</span><span class=nx>，点击进程执行会报以上错误。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>require</span> <span class=s1>&#39;db.class.php&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$dbHost</span> <span class=o>=</span> <span class=s1>&#39;localhost&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$dbUser</span> <span class=o>=</span> <span class=s1>&#39;xxxxxx&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$dbPasswd</span> <span class=o>=</span> <span class=s1>&#39;xxxxxx&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$dbName</span> <span class=o>=</span> <span class=s1>&#39;test&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$pdo</span> <span class=o>=</span> <span class=nx>db</span><span class=o>::</span><span class=na>getInstance</span><span class=p>(</span><span class=nv>$dbHost</span><span class=p>,</span> <span class=nv>$dbUser</span><span class=p>,</span> <span class=nv>$dbPasswd</span><span class=p>,</span> <span class=nv>$dbName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$pdo</span><span class=o>-&gt;</span><span class=na>insert</span><span class=p>(</span><span class=s1>&#39;test&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;name&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;wml&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>sleep</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span>   <span class=c1>#在php脚本最后一行加上一句，可解决该问题
</span></span></span></code></pre></td></tr></table></div></div><h3 id=进程-web管理界面>进程 web管理界面</h3><p>supervisor提供web管理页面，可以在网页端对进程进行监控，启动，终止，重启等操作</p><p>将supervisord.conf中[inet_http_server]部分做相应配置，在supervisorctl中reload即可启动web管理界面</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=na>[inet_http_server]           ; inet (TCP) server disabled by default</span>
</span></span><span class=line><span class=cl><span class=na>port</span><span class=o>=</span><span class=s>192.168.10.129:9001     ; 外网ip(ip_address:port specifier, *:port for all iface)</span>
</span></span><span class=line><span class=cl><span class=na>username</span><span class=o>=</span><span class=s>xxxxxxx             ; (default is no username (open server))</span>
</span></span><span class=line><span class=cl><span class=na>password</span><span class=o>=</span><span class=s>xxxxxxx             ; (default is no password (open server))</span>
</span></span></code></pre></td></tr></table></div></div><p>在浏览器打开网址192.168.10.129:9001，输入上面账号xxxxxxx密码xxxxxxx，即可进入web管理页面：</p><p><a href=https://www.muouseo.com/article/nq5vrkqe7p.html><img src=https://www.muouseo.com/storage/images/2022/01/13/A3CT8XnmI69N8BU9hh6rIrxEismApcPvFC93JwHH.png alt=img></a></p><h3 id=supervisor缺点>supervisor缺点</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=mf>1.</span> <span class=nx>单机监控</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mf>2.</span> <span class=nx>只能从supervisor启动的程序才能监控，从其他地方启动的无法监控</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mf>3.</span> <span class=nx>需要指出的是，被</span> <span class=nx>Supervisor</span> <span class=nx>管理的进程，不能使用</span> <span class=nx>daemon</span> <span class=nx>模式，而必须在前台运行，否则会报错。</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=进程描述符限制>进程描述符限制</h3><p>有时会遇到如一个进程监听到200个长连接后新的连接就连不上了，这是因为supervisor进程描述符的限制。</p><p>supervisor进程描述符默认为200，对于管理需要更多进程描述符的子进程一定要修改配置文件</p><p>/etc/supervisor/supervisord.conf, 在[supervisord]下面添加minfds=102400（改大即可）。</p><p>可以使用阿里云监控 supervisord 进程， supervisord进程再监控各子进程</p><p>其他监控工具如 monit ，功能更加强大。等以后研究</p><p>@搜索词：sup，super</p></article><script defer src=/js/clipboard.min.1626706afc88d95ebe1173b553ec732c6dc82a576989315fdf5e7779af738a44.js></script><script defer src=/js/helper/prev.min.js></script><script defer src=/js/helper/prop.min.js></script><script>"use strict";document.addEventListener("DOMContentLoaded",function(){var e=!1,t=document.querySelectorAll("pre.chroma"),n=document.querySelectorAll(".language-code"),s=document.querySelectorAll("div.language-\\$"),o=document.querySelectorAll("div.language-\\>"),i=function(t){var s,o,i,a,r,c,l,d=t,n=t.textContent;if(n.length>15){e||(a=new ClipboardJS(".copy-to-clipboard",{text:function(e){var t=prev(e).querySelectorAll("code");return t.length>1?n=prev(e).querySelector('code[class^="language-"]').textContent:n=prev(e).querySelector("code").textContent,n.replace(/^\$\s/gm,"")}}),a.on("success",function(e){e.clearSelection(),l=prop(e.trigger.parentNode,"tagName")=="PRE",e.trigger.setAttribute("aria-label","Copied to clipboard!"),e.trigger.classList.add("tooltipped"),e.trigger.classList.add("tooltipped-w")}),a.on("error",function(e){l=prop(e.trigger.parentNode,"tagName")=="PRE",e.trigger.setAttribute("aria-label",e.action.toString()),e.trigger.classList.add("tooltipped"),e.trigger.classList.add("tooltipped-w")}),e=!0);for(r=["language-mermaid","language-viz","language-wave","language-chart","language-msc","language-flowchart"],c=!1,s=d.getAttribute("class"),o=0;o<r.length;o++)if(s&&s.startsWith(r[o])){c=!0;break}c||s&&(i=document.createElement("span"),i.setAttribute("class","copy-to-clipboard"),i.setAttribute("title","Copy to clipboard"),t.parentNode.parentNode.insertBefore(i,t.parentNode.nextElementSibling))}},a=function(e){var t=document.createElement("span");t.setAttribute("class","copy-to-clipboard"),t.setAttribute("title","Copy to clipboard"),e.parentNode.parentNode.insertBefore(t,e.parentNode.nextElementSibling)};t?t.forEach(function(e){e.querySelectorAll("code").forEach(function(e){i(e)})}):null,n?n.forEach(function(e){e.querySelectorAll("code").forEach(function(e){i(e)})}):null,s?s.forEach(function(e){e.querySelectorAll("code").forEach(function(e){a(e)})}):null,o?o.forEach(function(e){e.querySelectorAll("code").forEach(function(e){a(e)})}):null})</script><script>"use strict";function wrap(e,t){e.parentNode.insertBefore(t,e),t.appendChild(e)}(function(){var e=document.querySelector(".single__contents");e?e.querySelectorAll("pre > code").forEach(function(e){var t=e.getAttribute("data-lang"),n=document.createElement("div"),o=null,s=null;t&&t.includes(":")?(o=t.split(":")[0],s=t.split(":")[1],n.className="language-"+o,n.setAttribute("data-lang",s),e.className="language-"+o,e.setAttribute("data-lang",s),e.setAttribute("id",s)):t||(n.setAttribute("data-lang","Code"),n.className="language-code"),(!t||s)&&wrap(e.parentNode,n)}):null})();var langCodeElem=document.querySelectorAll(".language-code"),dollarCodeElem,gtCodeElem;langCodeElem?langCodeElem.forEach(function(e){var t=document.createElement("span");t.className="copy-to-clipboard",t.setAttribute("title","Copy to clipboard"),e.append(t)}):null,dollarCodeElem=document.querySelectorAll("div.language-\\$"),gtCodeElem=document.querySelectorAll("div.language-\\>"),dollarCodeElem?dollarCodeElem.forEach(function(e){var t=e.parentNode.parentNode?e.parentNode.parentNode.querySelectorAll(".lnt"):null;t?t.forEach(function(e){e.innerHTML="$<br/>"}):null}):null,gtCodeElem?gtCodeElem.forEach(function(e){var t=e.parentNode.parentNode?e.parentNode.parentNode.querySelectorAll(".lnt"):null;t?t.forEach(function(e){e.innerHTML="><br/>"}):null}):null</script><section class=related></section><div class=grow></div><nav class=pagination-single><a href=https://yslinwe.github.io/posts/%E7%BB%88%E7%AB%AF%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/ class=pagination-single__left><div class=pagination-single__icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M19 11H7.83l4.88-4.88c.39-.39.39-1.03.0-1.42s-1.02-.39-1.41.0l-6.59 6.59c-.39.39-.39 1.02.0 1.41l6.59 6.59c.39.39 1.02.39 1.41.0s.39-1.02.0-1.41L7.83 13H19c.55.0 1-.45 1-1s-.45-1-1-1z"/></svg></div><div class=pagination-single__left-title>设置终端代理</div></a><div class=grow></div><a href=https://yslinwe.github.io/posts/arm%E5%AE%89%E8%A3%85%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF/ class=pagination-single__right><div class=pagination-single__right-title>arm安装宝塔面板</div><div class=pagination-single__icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M5 13h11.17l-4.88 4.88c-.39.39-.39 1.03.0 1.42.39.39 1.02.39 1.41.0l6.59-6.59c.39-.39.39-1.02.0-1.41l-6.58-6.6c-.39-.39-1.02-.39-1.41.0s-.39 1.02.0 1.41L16.17 11H5c-.55.0-1 .45-1 1s.45 1 1 1z"/></svg></div></a></nav><div id=gitalk-container></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js crossorigin=anonymous></script><script>var gitalk=new Gitalk({id:"2021-10-28 00:00:00 +0000 UTC",title:"Supervisor使用",clientID:"e1d61566fcef3be23349",clientSecret:"8040097e71904cfc2a44e740939e74faf13f0882",repo:"git-commits",owner:"popoYSL",admin:["popoYSL"],body:decodeURI(location.href)});gitalk.render("gitalk-container")</script><noscript>Please enable JavaScript to view the <a href=https://github.com/gitalk/gitalk>comments powered by gitalk.</a></noscript><div class="modal micromodal-slide" id=modal aria-hidden=true><div class=modal__overlay tabindex=-1 data-micromodal-close><div class=modal__container role=dialog aria-modal=true aria-labelledby=modal-title><div class=modal__content id=modal-content><div id=mySwipe class=swipe><div class=swipe-wrap></div></div></div><span class=modal__items><span class=modal__header><div class=modal__paging title="Page Info" aria-label="Current Page"></div><div class="modal__icon modal__toolbar modal__toolbar--close" title=Close aria-label="Close Button" data-micromodal-close><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="25" height="25"><path fill="currentcolor" d="M21.734375 19.640625l-2.097656 2.09375C19.253906 22.121094 18.628906 22.121094 18.242188 21.734375L13 16.496094 7.761719 21.734375C7.375 22.121094 6.746094 22.121094 6.363281 21.734375l-2.097656-2.09375c-.386719-.386718999999999-.386719-1.011719.0-1.398437L9.503906 13 4.265625 7.761719c-.382812-.390625-.382812-1.019531.0-1.398438L6.363281 4.265625C6.746094 3.878906 7.375 3.878906 7.761719 4.265625L13 9.507813l5.242188-5.242188c.386718000000002-.386719 1.015625-.386719 1.394531.0l2.097656 2.09375C22.121094 6.746094 22.121094 7.375 21.738281 7.761719L16.496094 13l5.238281 5.242188C22.121094 18.628906 22.121094 19.253906 21.734375 19.640625z"/></svg></div><div class="modal__icon modal__toolbar modal__toolbar--full" title="Full Screen" aria-label="Full Screen Button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="25" height="25"><path fill="currentcolor" d="M5 3C3.9069372 3 3 3.9069372 3 5V8A1.0001 1.0001.0 105 8V5H8A1.0001 1.0001.0 108 3H5zM16 3a1.0001 1.0001.0 100 2h3V8a1.0001 1.0001.0 102 0V5C21 3.9069372 20.093063 3 19 3H16zM3.984375 14.986328A1.0001 1.0001.0 003 16v3c0 1.093063.9069372 2 2 2H8a1.0001 1.0001.0 100-2H5V16A1.0001 1.0001.0 003.984375 14.986328zm16 0A1.0001 1.0001.0 0019 16v3H16a1.0001 1.0001.0 100 2h3C20.093063 21 21 20.093063 21 19V16a1.0001 1.0001.0 00-1.015625-1.013672z"/></svg></div><div class="modal__icon modal__toolbar modal__toolbar--normal" title="Normal Screen" aria-label="Normal Screen Button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="25" height="25"><path fill="currentcolor" d="M16.96875 4.972656C15.867188 4.988281 14.984375 5.894531 15 7v8H7C6.277344 14.988281 5.609375 15.367188 5.246094 15.992188 4.878906 16.613281 4.878906 17.386719 5.246094 18.007813 5.609375 18.632813 6.277344 19.011719 7 19H19V7C19.007813 6.460938 18.796875 5.941406 18.414063 5.558594 18.03125 5.175781 17.511719 4.964844 16.96875 4.972656zm16 0c-1.046875.015625-1.90625.839844-1.964844 1.886719C31 6.90625 31 6.953125 31 7V19H43C43.066406 19 43.132813 19 43.199219 18.992188 44.269531 18.894531 45.070313 17.972656 45.015625 16.902344 44.964844 15.828125 44.074219 14.988281 43 15H35V7C35.007813 6.460938 34.796875 5.941406 34.414063 5.558594 34.03125 5.175781 33.511719 4.964844 32.96875 4.972656zM7 31C6.277344 30.988281 5.609375 31.367188 5.246094 31.992188 4.878906 32.613281 4.878906 33.386719 5.246094 34.007813 5.609375 34.632813 6.277344 35.011719 7 35h8v8C14.988281 43.722656 15.367188 44.390625 15.992188 44.753906 16.613281 45.121094 17.386719 45.121094 18.007813 44.753906 18.632813 44.390625 19.011719 43.722656 19 43V31zm24 0V43C30.988281 43.722656 31.367188 44.390625 31.992188 44.753906 32.613281 45.121094 33.386719 45.121094 34.007813 44.753906 34.632813 44.390625 35.011719 43.722656 35 43V35h8C43.722656 35.011719 44.390625 34.632813 44.753906 34.007813 45.121094 33.386719 45.121094 32.613281 44.753906 31.992188 44.390625 31.367188 43.722656 30.988281 43 31z"/></svg></div></span><div class="modal__icon modal__arrow modal__arrow--left" title="Arrow Left" aria-label="Arrow Left Button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="28" height="28"><path fill="currentcolor" d="M23.28125 11 10 10V6.851563C10 6.523438 9.839844 6.277344 9.519531 6.03125 9.199219 5.949219 8.878906 5.949219 8.640625 6.113281c-3.28125 2.296875-6.402344 6.144532-6.480469 6.308594-.078125.15625-.152343.390625-.15625.554688000000001C2.003906 12.980469 2 12.988281 2 12.992188 2 13.15625 2.078125 13.402344 2.160156 13.484375 2.238281 13.648438 5.28125 17.507813 8.640625 19.804688 8.960938 19.96875 9.28125 20.050781 9.519531 19.886719 9.839844 19.722656 10 19.476563 10 19.148438V16l13.28125-1C23.679688 14.679688 24 13.875 24 12.992188 24 12.195313 23.761719 11.320313 23.28125 11z"/></svg></div><div class="modal__icon modal__arrow modal__arrow--right" title="Arrow Right" aria-label="Arrow Right Button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="28" height="28"><path fill="currentcolor" d="M2.71875 11.023438l13.28125-1V6.875C16 6.546875 16.160156 6.300781 16.480469 6.054688 16.800781 5.972656 17.121094 5.972656 17.359375 6.136719c3.28125 2.296875 6.402344 6.144531 6.480469 6.308594.078125.15625.152343999999999.390625.15625.554687C23.996094 13.003906 24 13.011719 24 13.015625 24 13.179688 23.921875 13.425781 23.839844 13.507813 23.761719 13.671875 20.71875 17.53125 17.359375 19.828125 17.039063 19.992188 16.71875 20.074219 16.480469 19.910156 16.160156 19.746094 16 19.5 16 19.171875V16.023438L2.71875 15.023438C2.320313 14.703125 2 13.898438 2 13.015625c0-.796875.238281-1.671875.71875-1.992187z"/></svg></div><div class=modal__caption><div class=modal__caption--text></div></div></span></div></div></div><script defer src=/js/swipe.min.feb438efb7ca009ecd7fc2ac3ad2fced4840990b2798d81f87137f2dc6281f05.js></script><script defer src=/js/micromodal.min.de01b44b2f383056bbcaf6ee921fd385d79108ec1129afd0eb2f3f5a07e11f45.js></script><script defer src=/js/helper/fadeinout.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){var e,t,n,o,i,a,r,c,l,d,u,h,f,p,g,v,b,s=document.documentElement;function j(){s.requestFullscreen?s.requestFullscreen():s.mozRequestFullScreen?s.mozRequestFullScreen():s.webkitRequestFullscreen?s.webkitRequestFullscreen():s.msRequestFullscreen&&s.msRequestFullscreen()}function m(){(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}c=document.getElementById("modal"),i=document.querySelector(".gallery__container"),v=document.querySelector(".swipe-wrap"),b=document.getElementById("mySwipe"),u=document.querySelector(".modal__arrow--left"),f=document.querySelector(".modal__arrow--right"),h=document.querySelector(".modal__toolbar--close"),t=document.querySelector(".modal__toolbar--full"),n=document.querySelector(".modal__toolbar--normal"),r=document.querySelector(".modal__caption"),d=document.querySelector(".modal__paging"),o=document.querySelector(".modal__items"),a=null,l=null,e=null,p=function(t){t.key==="ArrowRight"?c&&c.classList.contains("is-open")&&e.next():t.key==="ArrowLeft"&&c&&c.classList.contains("is-open")&&e.prev()},i?a=i.querySelectorAll("img").length:(i=document.querySelector(".single__contents"),a=i.querySelectorAll("img").length),MicroModal.init({onClose:function(){e&&(e.kill(),e=null,m()),window.removeEventListener("keydown",p)},disableScroll:!0,disableFocus:!0,awaitOpenAnimation:!1,awaitCloseAnimation:!1,debugMode:!1}),g=function(e){return new Promise(function(t,n){var s=new Image;s.onload=function(){t(s)},s.onerror=n,s.src=e})},i.querySelectorAll("img").forEach(function(s,i){s.style.cursor="pointer";var c,u=s.cloneNode(!0);u.style.maxHeight="100%",u.style.maxWidth="100%",u.onclick=function(e){e.stopPropagation()},c=document.createElement("div"),c.style.width="100%",c.style.height="100vh",c.setAttribute("data-micromodal-close",""),c.onclick=function(){e&&(e.kill(),e=null)},c.onmouseenter=function(){clearTimeout(l),fadeIn(o,200)},c.onmouseleave=function(){l=setTimeout(function(){fadeOut(o,200)},2500)},c.ontouchstart=function(){fadeIn(o,200)},c.append(u),v.append(c),s.addEventListener("click",async function(s){MicroModal.show("modal"),e&&(e.kill(),e=null);var c,m=s.target.getAttribute("data-src")||s.target.getAttribute("src"),h=await g(m);u.style.width=h.width+"px",u.style.height=h.height+"px",e=new Swipe(b,{startSlide:i,draggable:!0,autoRestart:!1,continuous:!1,disableScroll:!0,stopPropagation:!0,callback:async function(e,t){var s,n=t.querySelector("img"),c=n.getAttribute("data-src")||n.getAttribute("src"),i=await g(c);n.style.width=i.width+"px",n.style.height=i.height+"px",r&&n&&(s=null,n.getAttribute("data-caption")?s=n.getAttribute("data-caption"):n.getAttribute("title")?s=n.getAttribute("title"):n.getAttribute("alt")?s=n.getAttribute("alt"):s=n.getAttribute("src"),r.querySelector(".modal__caption--text").innerText=s,d.innerText=e+1+" / "+a,clearTimeout(l),fadeIn(o,200))}}),fadeIn(o),r&&(c=null,s.target.getAttribute("data-caption")?c=s.target.getAttribute("data-caption"):s.target.getAttribute("title")?c=s.target.getAttribute("title"):s.target.getAttribute("alt")?c=s.target.getAttribute("alt"):c=s.target.getAttribute("src"),r.querySelector(".modal__caption--text").innerText=c,d.innerText=i+1+" / "+a),n&&t&&(n.style.zIndex=-1,n.style.opacity=0,t.style.zIndex=25,t.style.opacity=1)}),window.addEventListener("keydown",p)}),u?u.addEventListener("click",function(){e&&e.prev()}):null,f?f.addEventListener("click",function(){e&&e.next()}):null,h?h.addEventListener("click",function(){e&&(e.kill(),e=null),m(),MicroModal.close("modal")}):null,t?t.addEventListener("click",function(){j(),n&&(n.style.zIndex=25,n.style.opacity=1,t.style.zIndex=-1,t.style.opacity=0)}):null,n?n.addEventListener("click",function(){m(),t&&(t.style.zIndex=25,t.style.opacity=1,n.style.zIndex=-1,n.style.opacity=0)}):null})</script><div class=hide><div class=search><span class=icon><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentcolor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49.0s.41-1.08.0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></span><input id=search aria-label="Site Search" class=input type=text placeholder=搜索 autocomplete=off><div id=search-results class=dropdown><div id=search-menu class=dropdown-menu role=menu></div></div></div></div></div></main><aside class="single__side main-side"><section class="sidebar hide"><script>document.querySelector(".sidebar").classList.remove("hide")</script><div class=toc__flexbox data-position=fixed><h6 class=toc__title data-ani=true>目录</h6><label class=switch data-ani=true><input id=toggle-toc aria-label="Toggle TOC" type=checkbox checked>
<span class="slider round"></span></label></div><div class=toc data-dir=ltr data-folding=true data-ani=true><nav id=TableOfContents><ul><li><ul><li><a href=#supervisor>Supervisor</a></li><li><a href=#使用场景>使用场景</a></li><li><a href=#安装使用教程>安装使用教程</a><ul><li><a href=#ubuntu安装>ubuntu安装：</a></li><li><a href=#centos安装>centos安装：</a></li></ul></li><li><a href=#创建进程管理配置文件>创建进程管理配置文件</a></li><li><a href=#supervisorctl-配置文件说明>supervisorctl 配置文件说明</a></li><li><a href=#进程管理命令>进程管理命令</a><ul><li><a href=#各命令是否会重启子进程>各命令是否会重启子进程</a></li></ul></li><li><a href=#进程-web管理界面>进程 web管理界面</a></li><li><a href=#supervisor缺点>supervisor缺点</a></li><li><a href=#进程描述符限制>进程描述符限制</a></li></ul></li></ul></nav></div></section></aside><script>var enableToc=JSON.parse("true"),toc=JSON.parse("null"),tocPosition=JSON.parse('"inner"'),singleMainElem=document.querySelector(".single__main"),singleSideElem=document.querySelector(".single__side");enquire.register("screen and (max-width: 769px)",{match:function(){(enableToc||toc)&&tocPosition!=="outer"?singleMainElem&&singleSideElem&&(singleMainElem.classList.remove("main-main"),singleMainElem.classList.add("main"),singleSideElem.classList.remove("main-side"),singleSideElem.classList.add("hide")):tocPosition==="outer"&&(singleMainElem&&!singleMainElem.classList.contains("main-main")&&(singleMainElem.classList.remove("main-main"),singleMainElem.classList.add("main")),singleSideElem&&!singleSideElem.classList.contains("hide")&&singleSideElem.classList.add("hide"))},unmatch:function(){(enableToc||toc)&&tocPosition!=="outer"?(singleMainElem.classList.remove("main"),singleMainElem.classList.add("main-main"),singleSideElem.classList.remove("hide"),singleSideElem.classList.add("main-side")):tocPosition==="outer"&&(singleMainElem&&!singleMainElem.classList.contains("main-main")&&(singleMainElem.classList.remove("main-main"),singleMainElem.classList.add("main")),singleSideElem&&!singleSideElem.classList.contains("hide")&&singleSideElem.classList.add("hide"));var t=document.querySelector(".navbar__burger"),e=document.getElementsByClassName("navbarm__collapse")[0];e&&(e.setAttribute("data-open",!1),e.style.maxHeight=0,t.classList.remove("is-active")),document.getElementsByClassName("navbar__menu")[0].classList.remove("is-active"),document.getElementsByClassName("mobile-search")[0].classList.add("hide")},setup:function(){},deferSetup:!0,destroy:function(){}})</script><script defer src=/js/helper/getParents.min.js></script><script defer src=/js/helper/closest.min.js></script><script defer src=/js/helper/prev.min.js></script><script defer src=/js/helper/prop.min.js></script><script defer src=/js/helper/fadeinout.min.js></script><script defer src=/js/helper/throttle.min.js></script><script>"use strict";window.onload=function(){var e,t,n,s,o,i,r,c,l,d,u,h,m,f,p,g,v,b,j,y,_,w,O,x,C,E,k,A,S,M,F,T,z,D,N,H,a=document.querySelector(".navbar"),P=document.querySelector(".single__contents"),R=JSON.parse("false"),L=JSON.parse("true");R&&L&&(y=document.querySelector("#busuanzi_value_page_pv"),y.textContent=y.textContent.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")),S=JSON.parse("true"),z=JSON.parse("null"),D=JSON.parse("false"),d=document.querySelector(".toc__flexbox"),u=document.querySelector(".toc__flexbox--outer"),x=JSON.parse("true"),(S||z)&&document.querySelector(".toc")&&(i=document.querySelector(".toc").querySelector("#TableOfContents"),i.onmouseenter=function(){a.classList.contains("scrolling")&&a.classList.remove("scrolling")},i.onmouseleave=function(){a.classList.contains("scrolling")||a.classList.add("scrolling")},!1===x||(i.querySelectorAll("ul")?i.querySelectorAll("ul").forEach(function(e){e.querySelectorAll("li").forEach(function(e){e.querySelectorAll("ul").forEach(function(e){e.style.display="none"})})}):null),i&&(i.querySelectorAll("a").length>0?i.querySelectorAll("a").forEach(function(e){e.addEventListener("click",function(){var t,n=e.getAttribute("id");a.classList.contains("scrolling")||(a.classList.remove("navbar--show"),a.classList.remove("navbar--hide"),a.classList.add("navbar--hide")),document.querySelector(".toc").querySelectorAll("a").forEach(function(e){e.classList.remove("active")}),e.classList.add("active"),t=i.querySelector('[href="#'+n+'"]'),t&&t.nextElementSibling&&(t.nextElementSibling.style.display="block"),t&&(getParents(t,"ul")?getParents(t,"ul").forEach(function(e){e.style.display="block"}):null)})}):(d&&(d.setAttribute("data-position",""),d.classList.contains("hide")||d.classList.add("hide")),u&&(u.setAttribute("data-position",""),u.classList.contains("hide")||u.classList.add("hide")))),b=document.getElementById("toggle-toc"),v=document.getElementById("visible-toc"),s=document.querySelector(".toc"),o=document.querySelector("main"),l=document.querySelector("side"),c=document.querySelector(".toc__flexbox"),b?b.addEventListener("change",function(e){e.target.checked?(s&&fadeIn(s,200),c&&c.setAttribute("data-position","fixed"),o&&(o.classList.remove("main-main"),o.classList.remove("main"),o.classList.add("main-main")),l&&l.classList.remove("main-side")):(s&&fadeOut(s,200),c&&c.setAttribute("data-position","absolute"),o&&(o.classList.remove("main-main"),o.classList.remove("main"),o.classList.add("main")),l&&l.classList.remove("main-side"))}):null,v?v.addEventListener("change",function(e){e.target.checked?s&&fadeIn(s,200):s&&fadeOut(s,200)}):null),C=120,M=70,A=function(){s&&(s.style.maxHeight=window.innerHeight-C-M+"px")},w=throttle(A,300),w(),window.addEventListener("resize",w),E=new ClipboardJS(".anchor"),j=P.querySelectorAll("h1, h2, h3, h4"),F=JSON.parse('"ltr"'),j?j.forEach(function(e){var t,s=parseInt(e.tagName.substr(1),10)*2,o=encodeURI(document.location.origin+document.location.pathname),i=o+"#"+e.getAttribute("id"),n=document.createElement("span");n.classList.add("anchor"),n.classList.add("hide"),n.setAttribute("data-clipboard-text",decodeURI(i)),n.style.position="relative",t=document.createElement("span"),t.style.position="absolute",t.style.top="50%",t.style.left="0.75rem",t.style.transform="translateY(-50%)",t.innerHTML=`
<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="${32-s}px" height="${32-s}px"><path d="M 5.5625 0 C 4.136719 0 2.707031 0.542969 1.625 1.625 C -0.539063 3.789063 -0.539063 7.335938 1.625 9.5 L 5.28125 13.15625 C 5.667969 13.554688 6.304688 13.558594 6.703125 13.171875 C 7.101563 12.785156 7.105469 12.148438 6.71875 11.75 L 3.03125 8.0625 C 1.632813 6.664063 1.632813 4.429688 3.03125 3.03125 C 4.429688 1.632813 6.664063 1.632813 8.0625 3.03125 L 12.96875 7.9375 C 14.367188 9.335938 14.367188 11.570313 12.96875 12.96875 C 12.804688 13.132813 12.621094 13.25 12.4375 13.375 C 11.980469 13.6875 11.859375 14.308594 12.171875 14.765625 C 12.484375 15.222656 13.105469 15.34375 13.5625 15.03125 C 13.847656 14.835938 14.125 14.625 14.375 14.375 C 16.539063 12.210938 16.539063 8.664063 14.375 6.5 L 9.5 1.625 C 8.417969 0.542969 6.988281 0 5.5625 0 Z M 10.78125 8.875 C 10.738281 8.882813 10.695313 8.894531 10.65625 8.90625 C 10.507813 8.9375 10.371094 9 10.25 9.09375 C 10.039063 9.253906 9.820313 9.429688 9.625 9.625 C 7.460938 11.789063 7.460938 15.335938 9.625 17.5 L 14.5 22.375 C 16.664063 24.539063 20.210938 24.539063 22.375 22.375 C 24.539063 20.210938 24.539063 16.664063 22.375 14.5 L 18.71875 10.875 C 18.476563 10.578125 18.089844 10.441406 17.714844 10.527344 C 17.34375 10.613281 17.050781 10.90625 16.964844 11.277344 C 16.878906 11.652344 17.015625 12.039063 17.3125 12.28125 L 20.96875 15.9375 C 22.367188 17.335938 22.367188 19.570313 20.96875 20.96875 C 19.570313 22.367188 17.335938 22.367188 15.9375 20.96875 L 11.03125 16.0625 C 9.632813 14.664063 9.632813 12.429688 11.03125 11.03125 C 11.152344 10.90625 11.300781 10.820313 11.4375 10.71875 C 11.839844 10.472656 12.015625 9.976563 11.855469 9.53125 C 11.699219 9.085938 11.25 8.8125 10.78125 8.875 Z"/></svg>`,F==="rtl"?t.style.left="-2rem":t.style.right="-2rem",n.append(t),e.append(n),e.addEventListener("mouseenter",function(){this.querySelector(".anchor").classList.remove("hide")}),e.addEventListener("mouseleave",function(){this.querySelector(".anchor").classList.add("hide")})}):null,document.querySelectorAll(".anchor").forEach(function(e){e.addEventListener("mouseleave",function(){e.setAttribute("aria-label",null),e.classList.remove("tooltipped"),e.classList.remove("tooltipped-s"),e.classList.remove("tooltipped-w")})}),E.on("success",function(e){e.clearSelection(),e.trigger.setAttribute("aria-label","Link copied to clipboard!"),e.trigger.classList.add("tooltipped"),e.trigger.classList.add("tooltipped-s")}),t=JSON.parse("null"),t&&t.includes("mermaid")&&(O=localStorage.getItem("theme")||JSON.parse('"dark"'),O==="dark"||O==="hacker"?mermaid.initialize({theme:"dark"}):mermaid.initialize({theme:"default"}),_=[],[].push.apply(_,document.getElementsByClassName("language-mermaid")),_.forEach(function(e){var n,t=e.parentNode;t!==document.body&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t)),n=document.createElement("div"),n.classList.add("mermaid"),n.style.padding="34px 4px 6px",n.innerHTML=e.innerHTML,e.replaceWith(n)})),t&&t.includes("katex")&&(N=document.getElementsByClassName("math"),r={delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]},renderMathInElement(document.querySelector(".single__contents"),r)),t&&t.includes("flowchartjs")&&(r=JSON.parse('{"arrow-end":"block","element-color":"black","fill":"white","flowstate":{"approved":{"fill":"#58C4A3","font-size":12,"no-text":"n/a","yes-text":"APPROVED"},"current":{"fill":"yellow","font-color":"red","font-weight":"bold"},"future":{"fill":"#FFFF99"},"invalid":{"fill":"#444444"},"past":{"fill":"#CCCCCC","font-size":12},"rejected":{"fill":"#C45879","font-size":12,"no-text":"REJECTED","yes-text":"n/a"},"request":{"fill":"blue"}},"font-color":"black","font-size":14,"line-color":"black","line-length":50,"line-width":3,"no-text":"no","scale":1,"symbols":{"end":{"class":"end-element"},"start":{"element-color":"green","fill":"yellow","font-color":"red"}},"text-margin":10,"x":0,"y":0,"yes-text":"yes"}'),n=null,T="language-flowchart",e=0,Array.prototype.forEach.call(document.querySelectorAll("[class^="+T+"]"),function(t){t.style.display="none",t.parentNode.style.backgroundColor="transparent",n=t.innerText;var o,s=document.createElement("div");s.id="flowchart"+e,t.parentNode.insertBefore(s,t),o=flowchart.parse(n),o.drawSVG("flowchart"+e,r),e+=1})),document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"}),t&&t.includes("msc")&&(r=JSON.parse('{"theme":"hand"}'),n=null,e=0,h="language-msc",Array.prototype.forEach.call(document.querySelectorAll("[class^="+h+"]"),function(t){t.style.display="none",t.parentNode.style.backgroundColor="transparent",n=t.innerText;var o,s=document.createElement("div");s.id="msc"+e,t.parentNode.insertBefore(s,t),o=Diagram.parse(n),o.drawSVG("msc"+e,r),e+=1})),t&&t.includes("chart")&&(m="#666",f="#ddd",p=2,Chart.defaults.global.elements.rectangle.borderWidth=p,Chart.defaults.global.elements.rectangle.borderColor=m,Chart.defaults.global.elements.rectangle.backgroundColor=f,Chart.defaults.global.elements.line.borderWidth=p,Chart.defaults.global.elements.line.borderColor=m,Chart.defaults.global.elements.line.backgroundColor=f,Chart.defaults.global.elements.point.borderWidth=p,Chart.defaults.global.elements.point.borderColor=m,Chart.defaults.global.elements.point.backgroundColor=f,h="language-chart",e=0,n=null,Array.prototype.forEach.call(document.querySelectorAll("[class^="+h+"]"),function(t){t.style.display="none",t.parentNode.style.backgroundColor="transparent",n=t.innerText;var i,a,s=document.createElement("canvas"),o=null;s.height=200,s.style.height=200,s.id="myChart"+e,o=JSON.parse(n),t.parentNode.insertBefore(s,t),i=document.getElementById("myChart"+e).getContext("2d"),a=new Chart(i,o),e+=1})),t&&t.includes("wavedrom")&&(k="language-wave",e=0,n=null,Array.prototype.forEach.call(document.querySelectorAll("[class^="+k+"]"),function(t){t.style.display="none",t.parentNode.style.backgroundColor="transparent",n=t.innerText;var s=document.createElement("div"),o=null;s.id="WaveDrom_Display_"+e,o=JSON.parse(n),t.parentNode.insertBefore(s,t),WaveDrom.RenderWaveForm(e,o,"WaveDrom_Display_"),e+=1})),t&&t.includes("viz")&&(g="language-viz-",Array.prototype.forEach.call(document.querySelectorAll("[class^="+g+"]"),function(e){e.style.display="none",e.parentNode.style.backgroundColor="transparent",e.getAttribute("class").split(" ").forEach(function(e){e.startsWith(g)&&(t=e.substr(g.length))});var t,n=new Viz;n.renderSVGElement(e.innerText,{engine:t}).then(function(t){t.style.width="100%",e.parentNode.insertBefore(t,e)})}))}</script><footer class=footer><div id=gtt><div class=gtt><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 14.71 12 10.83l3.88 3.88c.39.39 1.02.39 1.41.0s.39-1.02.0-1.41L12.7 8.71c-.39-.39-1.02-.39-1.41.0L6.7 13.3c-.39.39-.39 1.02.0 1.41.39.38 1.03.39 1.42.0z"/></svg></div></div><hr><div class="basicflex flexwrap"></div><div class=footer__poweredby><p class=caption>©2024, All Rights Reserved</p><p class=caption>Powered by <a href=https://gohugo.io/ target=_blank rel=noreferrer>Hugo</a> and the <a href=https://github.com/zzossig/hugo-theme-zzo target=_blank rel=noreferrer>Zzo theme</a></p></div></footer></div><div class="wrapper__right hide" data-pad=true dir=ltr><script>document.querySelector(".wrapper__right").classList.remove("hide")</script></div></div></body><script src=L2Dwidget.min.js></script><script>L2Dwidget.init({model:{jsonPath:"https://cdn.jsdelivr.net/gh/wangsrGit119/wangsr-image-bucket/L2Dwidget/live2d-widget-model-hijiki/assets/hijiki.model.json"},display:{position:"right",width:100,height:175,hOffset:-10,vOffset:-50},mobile:{show:!0,scale:.5},react:{opacityDefault:1,opacityOnHover:.2}})</script></html>