---
title: "360 t7刷入小米路由"
summary: 360 t7刷入小米路由
date: 2024-08-06
tags: ["360 t7"]
author: "YSL"
draft: false
weight: 2s
---

1. 刷机文件：Downloads.zip
   链接：https://pan.baidu.com/s/1w_KRTIm_I_llOIVHTUYJeA?pwd=ehjz 
   提取码：ehjz
   
1. 刷入旧版系统

   直接刷入360T7-v4.2.4.7959_upgrade

1.拆机，此机器卡扣较紧，拆机后找到下图红框内的UART串口。**线序由上到下为RXD，TXD，GND，波特率115200**

https://cmi.hanwckf.top/p/360t7-telnet-uboot-console/UART.webp

```
# 开启uboot控制台菜单
fw_setenv bootmenu_delay 3

# 挂载rootfs并开启telnet
mount_root
sed -i 's/.*local debug=.*/\tlocal debug=1/' /etc/init.d/telnet

# 修改root密码
passwd root
```

重启用电脑网线和路由器的lan口连接上，等待路由器启动后可以进入后台，
再打开putty选择telnet登录端口号23 IP地址填写你自己是路由的后台登陆地址

登录后输入账号root 密码 是你自己修改的

![img](https://www.right.com.cn/forum/data/attachment/forum/202306/29/024802b3kiie6ytgnl8hed.png)

6.刷入uboot
打开**HFS工具**选择IP地址，这里多网口的同志一定要选对哦

HFS工具 [Release 0.53.0 · rejetto/hfs (github.com)](https://github.com/rejetto/hfs/releases/tag/v0.53.0)

```
wget -P /tmp http://192.168.x.x/360t7-fip-fixed-parts.bin
md5sum /tmp/360t7-fip-fixed-parts.bin
mtd erase fip
mtd write /tmp/360t7-fip-fixed-parts.bin fip
mtd verify /tmp/360t7-fip-fixed-parts.bin fip
```

确认一致就代表uboot刷入成功了，然后退出，恭喜你来到最后一步！

7.刷入固件
还是使用老方法，用过K2p的都知道，按住路由器的RESET按钮后通电，这时路由器会进入uboot模式

地址会变成192.168.1.1，你需要将你电脑的IP修改到192.168.1.x的网段（192.168.1.9）浏览器访问192.168.1.1
就会进入uboot界面，然后选择上传固就好了

https://www.right.com.cn/forum/data/attachment/forum/202306/29/025149b0h8dhyhsd5h560z.png

再次把ip地址改回自动分配，登录192.168.6.1 （237大佬的wrt固件）登录密码：password

![img](https://www.right.com.cn/forum/data/attachment/forum/202306/29/025301q7zprl11r3lzxx5u.png)

8. 连接ssh上传ax3000t_B8F0_a70ad81f_for360t7_mtd0.bin到/tmp

```
mtd write /tmp/ax3000t_B8F0_a70ad81f_for360t7_mtd0.bin /dev/mtd0
```

- telnet登录账号为root 密码为a70ad81f 需自行固化ssh

**固件下载**
    链接：https://pan.quark.cn/s/1b6781bb25e0
    提取码：efUa

如需2台T7刷WR30U组网，需用第9步的方法修改Bdata内所有项的参数，确保两台设备SN，Mac，ID等信息不一样，并修改其中一台的WiFi Mac地址，否则会因地址相同而无法组网，方法参考这个帖子[电梯直达](https://www.right.com.cn/forum/forum.php?mod=viewthread&tid=221145)

9. telnet登录，修改MAC和SN等信息，此步可改可不改，不影响使用，仅为个人偏好改回T7Mac地址（教程出自[https://www.right.com.cn/forum/f ... wthread&tid=8292909](https://www.right.com.cn/forum/forum.php?mod=viewthread&tid=8292909)）
       在MobaXterm执行：bdata show 查看Bdata信息，再跟需需求执行下面命令修改：

```
zz=$(dd if=/dev/zero bs=1 count=2 2>/dev/null) ; printf '\xA5\x5A%c%c' $zz $zz | mtd write - crash
reboot
```

 等待路由器重启后，重新连接ssh，并执行以下指令（下面Mac可以按T7铭牌对应修改，SN建议只改后5位数字部分，上下对应即可，WiFi名称可改可不改，重置路由器时会按这个名称，最后几行是固化SSH的，以后想刷官方原滋原味版本的建议修改。

```
nvram set ethaddr_wan=24:cf:24:17:2d:c4
nvram set ethaddr=c8:bf:4c:88:bb:52
nvram set SN=40656/A2TJ11617
nvram set wl1_ssid=Xiaomi_2DC4
nvram set wl0_ssid=Xiaomi_2DC4_5G
nvram set ssh_en=1
nvram set telnet_en=1
nvram set uart_en=1
nvram set boot_wait=on
nvram commit
bdata set ethaddr_wan=24:cf:24:17:2d:c4
bdata set ethaddr=c8:bf:4c:88:bb:52
bdata set SN=40656/A2TJ11617
bdata set wl1_ssid=Xiaomi_2DC4
bdata set wl0_ssid=Xiaomi_2DC4_5G
bdata set ssh_en=1
bdata set telnet_en=1
bdata set uart_en=1
bdata set boot_wait=on
bdata commit
reboot
```

等待路由器重启后，重新连接ssh，并执行以下指令

```
mtd erase crash
reboot
```

由于已修改MAC和SN重启路由器后需在米家和小米WIFI APP重新上绑定。
   若重置固件SSH密码可以到这个网站https://miwifi.dev/ssh输入新的sn码计算出来。

10. 关于刷回T7官方或openwrt方法：(本人没有实机测试，欢迎大佬指正补充)

方法一（由161楼[yzh168](https://www.right.com.cn/FORUM/space-uid-855549.html)提供）
1、通过SSH工具上传360T7 的108M uboot文件mt7981_360t7-fip-fixed-parts.bin到/tmp
2、SSH终端输入mtd write /tmp/mt7981_360t7-fip-fixed-parts.bin FIP
3、重启接着按住路由器的RESET按钮后通电开机，等待8s后用浏览器进入192.168.1.1，刷入360T7固件。


方法二
下载好T7官方或openwrt完整的 flash 备份(编辑器固件)
1、使用 netcat 工具

1. ./netcat -l -p 9985 | mtd write - /dev/mtd0

*复制代码*

2、在flash 备份(编辑器固件)保存路径打开终端

1. nc 192.168.31.1 9985 < flash.bin

*复制代码*

3、刷完重启路由器即可

参考https://www.right.com.cn/FORUM/forum.php?mod=viewthread&tid=8291160

