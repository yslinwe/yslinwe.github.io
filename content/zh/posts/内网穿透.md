---
title: "内网穿透"
summary: 内网穿透
date: 2022-10-25
tags: ["内网穿透"]
author: "YSL"
draft: false
weight: 2
---

### 1.frp

docker 安装

服务器

1. 创建

```
touch frps.ini
touch docker-compose.yml
```
**frps.ini** 文件内容

```
[common]

#frp 监听端口，与客户端绑定端口

bind_port= 5443
kcp_bind_port = 5443


#dashboard用户名

dashboard_user= gugu

#dashboard密码

dashboard_pwd= passwd

#dashboard端口，启动成功后可通过浏览器访问如http://ip:9527

dashboard_port= 9527

#设置客户端token，对应客户端有页需要配置一定要记住，如果客户端不填写你连不上服务端

token = 8ad3d1x429a2d
```
**docker-compose.yml** 文件内容


```
version: '3.3'
services:
    frps:
        restart: always
        network_mode: host
        volumes:
            - './frps.ini:/etc/frp/frps.ini'
        container_name: frps
        image: snowdreamtech/frps
```

2. 启动docker

```
docker-compose up -d 
```

3. 开放端口
4. 更新镜像

```
docker-compose down 

docker-compose pull

docker-compose up -d 

docker image prune  # prune 命令用来删除不再使用的 docker 对象。删除所有未被 tag 标记和未被容器使用的镜像
```

5. 卸载

   ```
   docker stop frps
   
   docker rm -f frps  # 停止容器，此时不会删除映射到本地的数据
   
   rm -rf /root/data/docker_data/frps  # 完全删除映射到本地的数据
   ```

客户端

**frpc.ini** 文件配置

```
# frpc.ini
[common]
server_addr = 43.132.202.152
server_port = 5443
token = 8ad3d1x429a2d

[ssh]
type = tcp
local_ip = 127.0.0.1
local_port = 222
# 这个自定义，之后再ssh连接的时候要用
remote_port = 6000 

[qb]
type = tcp
local_ip = 127.0.0.1
local_port = 8092
remote_port = 6001

[jellyfin]
type = tcp
local_ip = 127.0.0.1
local_port = 32771
remote_port = 6002

[NAS]
type = tcp
local_ip = 127.0.0.1
local_port = 5000
remote_port = 6003

[nextcloud]
type = tcp
local_ip = 127.0.0.1
local_port = 4433
remote_port = 6004

[RDP]
type = tcp
local_ip = 127.0.0.1
local_port = 3389
remote_port = 7001


[vnc]
type = tcp
local_ip = 127.0.0.1
local_port = 5900
remote_port = 5900
use_encryption = true
use_compression = true
```

docker-compose 文件配置

```
version: '3.3'
services:
    frpc:
        restart: always
        network_mode: host
        volumes:
            - './frpc.ini:/etc/frp/frpc.ini'
        container_name: frpc
        image: snowdreamtech/frpc
```
