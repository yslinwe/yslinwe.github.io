---
title: "服务器命令行"
summary: 服务器命令行
date: 2020-04-10
tags: ["服务器"]
author: "YSL"
draft: false
weight: 3
image: https://cdn.pixabay.com/photo/2019/11/12/11/56/tajikistan-4620903__340.jpg
---

### 上传文件

```shell
    pscp -r newlivedowload root@139.9.116.41:live_download
    nethogs eth0
    ls -lh
    df -l
    ps -aux|grep get.py| grep -v grep

    nohup 运行文件>> output.log 2>&1 &
    nohup python3 -u main.py > test.out 2>&1 &
```

### 限制网速

```
    git clone  https://github.com/magnific0/wondershaper.git
```

在确定网卡名称以后，就可以按照以下的命令限制网络带宽：

```
    sudo wondershaper -a <adapter> -d <rate> -u <rate>
```

例如，如果网卡名称是 enp0s8，并且需要把上行、下行速率分别限制为 1024 Kbps 和 512 Kbps，就可以执行以下命令：

```
    sudo wondershaper -a eth0 -d 1024 -u 512
```

其中参数的含义是：

-a：网卡名称
-d：下行带宽
-u：上行带宽

如果要对网卡解除网络带宽的限制，只需要执行：

```
    ./wondershaper -a eth0 -c
```

### 后台运行

可以先执行：screen -S zgy ，screen就会创建一个名字为zgy的会话

###### 运行代码

当需要临时离开时（会话中的程序不会关闭，仍在运行）可以用快捷键Ctrl+a d(即按住Ctrl，依次再按a,d)
当回来时可以再执行执行：screen -r zgy 即可恢复到离开前创建的zgy会话的工作界面。

* screen -ls 
* screen会列出当前存在的会话列表

###### 恢复会话：

* screen -r zgy或screen -r pid

###### 退出会话

执行：exit ，会提示：[screen is terminating]，表示已经成功退出screen会话。

###### 常用快捷键

kill 掉一个窗口

* screen -X -S 4588 quit
* Ctrl+a c ：在当前screen会话中创建窗口
* Ctrl+a w ：窗口列表

* Ctrl+a n ：下一个窗口

* Ctrl+a p ：上一个窗口

* Ctrl+a 0-9 ：在第0个窗口和第9个窗口之间切换